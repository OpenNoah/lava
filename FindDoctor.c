#ifndef NULL
    #define USE_C_COMPILER
    #include "lava.h"
#else
    #define LCD_W   160
    #define LCD_H   80
    #width  LCD_W
    #height LCD_H
#endif
//#bigram
//#color  8

#define FONT_S      0x00
#define FONT_L      0x80
int TEXT_FONT;
int FONT_W;
int FONT_H;

#define WB_COPY 1
#define WB_NOT  2
#define WB_OR   3
#define WB_AND  4
#define WB_XOR  5

#define KEY_UP      20
#define KEY_DOWN    21
#define KEY_RIGHT   22
#define KEY_LEFT    23
#define KEY_F1      28
#define KEY_F2      29
#define KEY_ENTER   13
#define KEY_SPACE   20
#define KEY_HELP    25
#define KEY_ESC     27

//----------------------------------------------------------------
#define OBJECT_WIDTH_DOT    16
#define OBJECT_HEIGHT_DOT   20
#define Y_OFFSET            400         //20*20 LCD_WIDTH_BYTE*OBJECT_HEIGHT_DOT
#define OBJECT_DATA_SIZE    40          //2*20 OBJECT_WIDTH_BYTE*OBJECT_HEIGHT_DOT
//----------------------------------------------------------------
int LCD_MAX_WIDTH_OBJ;      // (_WIDTH/OBJECT_WIDTH_DOT)
int LCD_MAX_HEIGHT_OBJ;     // ((_HEIGHT+10)/OBJECT_HEIGHT_DOT)//debug
int LCD_HEIGHT_START;       // 0
int LCD_HEIGHT_END;         // (LCD_MAX_HEIGHT_OBJ-1)//debug
int LCD_WIDTH_START;        // 0
int LCD_WIDTH_END;          // (LCD_MAX_WIDTH_OBJ-1)
int FIX_H;                  // ((_HEIGHT-80+10)/OBJECT_HEIGHT_DOT)

#define OBJ_BLANK       0
#define OBJ_TREE        1
#define OBJ_BRICK       2
#define OBJ_GRAY        3
#define OBJ_MAN         4
#define OBJ_MAN2        5
#define OBJ_GLOBALVIEW1 6
#define OBJ_GLOBALVIEW2 7
#define OBJ_GLOBALVIEW3 8
#define OBJ_GLOBALVIEW4 9
#define OBJ_GLOBALVIEW5 10
#define OBJ_GLOBALVIEW6 11
#define OBJ_GLOBALVIEW7 12
#define OBJ_GLOBALVIEW8 13
#define OBJ_DR          14
#define OBJ_DRHOUSE1    15
#define OBJ_DRHOUSE2    16
#define OBJ_DRHOUSE3    17
#define OBJ_DRHOUSE4    18
#define OBJ_DRHOUSE5    19
#define OBJ_DRHOUSE6    20
#define OBJ_SLEEP       21
#define OBJ_OFFICE1     22
#define OBJ_OFFICE2     23
#define OBJ_SMILE       24
#define OBJ_OFFICE3     25
#define OBJ_OFFICE4     26
#define OBJ_OFFICE5     27
#define OBJ_OFFICE6     28
#define OBJ_CHEMICAL    29
#define OBJ_RICHHOUSE1  30
#define OBJ_RICHHOUSE2  31
#define OBJ_RICHHOUSE3  32
#define OBJ_RICHHOUSE4  33
#define OBJ_RICHHOUSE5  34
#define OBJ_RICHHOUSE6  35
#define OBJ_RICHHOUSE7  36
#define OBJ_RICHHOUSE8  37
#define OBJ_RICHHOUSE9  38
#define OBJ_RAPID1      40
#define OBJ_RAPID2      41
#define OBJ_RAPID3      42
#define OBJ_RAPID4      43
#define OBJ_RAPID5      44
#define OBJ_RAPID6      45
#define OBJ_DOORCLOSE   46
#define OBJ_DOOROPEN    47
#define OBJ_STAIR1      48
#define OBJ_STAIR2      49
#define OBJ_FLOWER      50
#define OBJ_HOME1       51
#define OBJ_HOME2       52
#define OBJ_HOME3       53
#define OBJ_HOME4       54
#define OBJ_TABLE       55
#define OBJ_CABINET     56
#define OBJ_GIRL        57
#define OBJ_BED         58
#define OBJ_POLICE      59
#define OBJ_SLINGSHOT   60
#define OBJ_TICKETMACHINE   61
#define OBJ_MONEY       62
#define OBJ_TICKET      63
#define OBJ_CELLPHONE   64
#define OBJ_STREETLAMP  65
#define OBJ_INVOICE     66
#define OBJ_COMPUTER    67
#define OBJ_CC800       68
#define OBJ_WATER       69
#define OBJ_CABINET_OPEN    70
#define OBJ_BADMANL     71
#define OBJ_BADMANR     72
#define OBJ_RAPIDCAR1   73
#define OBJ_RAPIDCAR2   74
#define OBJ_RAPIDCAR3   75
#define OBJ_TRACK       76
#define OBJ_CLOSESTOOL  77
#define OBJ_TOILETPAPER 78
#define OBJ_SAD         79
#define OBJ_ASSISTANT   80

//----------------------------------------------------------------
//#define LEFT_ARROW      23
//#define RIGHT_ARROW  22
//#define UP_ARROW     20
//#define DOWN_ARROW   21
//#define KEY_ENTER     13
//#define KEY_ESC       27
//#define KEY_HELP      25
//----------------------------------------------------------------
#define DELAY_TIME      200
//----------------------------------------------------------------
#define TALK        0
#define SEARCH      1
#define USE         2
//----------------------------------------------------------------
#define MAP_MAX_WIDTH_OBJ       31
#define MAP_MAX_HEIGHT_OBJ      30
//----------------------------------------------------------------
char MapData[MAP_MAX_HEIGHT_OBJ][MAP_MAX_WIDTH_OBJ];
char MapBackup[MAP_MAX_HEIGHT_OBJ][MAP_MAX_WIDTH_OBJ] =
{
    //  ´óµØÍ¼1
    01,01,01,01,01,30,31,32,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,
    01,15,16,17,01,33,34,35,01,01, 0, 0,51,52,01, 0, 0, 0, 0, 0,01,40,41,42,01, 0,01, 0, 0, 0,01,
    01,14,19,20,65,36,37,38, 0,01, 0, 0,53,54,01, 0, 0, 0, 0, 0,01,43,44,45,65, 0,01,01,01, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01, 0, 0, 0, 0, 0,01, 0,01, 0,01,
    01,01,65, 0,01,01,01,01,65,01,01,01,01,01, 0,01,01,65,01,01,01, 0, 0,01, 0, 0,01, 0,01, 0,01,
    01,01, 0, 0, 0,01,01,01,40,41,42,01, 0, 0, 0,01,01,22,23,01,01, 0, 0,01, 0,01, 0, 0, 0, 0,01,
    01, 0,01,01, 0, 0,01,01,43,44,45,01, 0, 0, 0,01,25,26,27,28,01,01, 0, 0, 0, 0, 0, 0, 0,01,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,01, 0, 0, 6, 7, 8, 9, 0, 0,01,
    01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01, 0,10,11,12,13,65, 0,01,

    //10            x05            x10            x15            x20
    01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01, 0, 0, 0, 0, 0, 0, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,01,01,01,01,01,01,01,01,01,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    03,03,03,03,03,03,03,03,03,03, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    76,02,02,02,03,02,02,61,02,02, 0,03,03,03,03,03,03,03,03,03,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    73, 0, 0, 0,46, 0, 0, 0, 0,48, 0,03,02,02,02,02,02,02,56,02,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    74, 0, 0, 0,03, 0, 0, 0, 0,03, 0,03,50, 0, 0, 0,55, 0, 0,58,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    75, 0, 0, 0,46, 0, 0, 0,50,03, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    76,03,03,03,03,03,03,03,03,03, 0,03,03,03,03,03,03,03,03,03,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,

    //20            x05            x10            x15            x20            x25
    03,56,02,02,02,02,02,02,02,03, 0,03,02,02,02,02,02,03,02,56,03,03,03,03,03,03,03,03,03,03,03,
    03, 0, 0, 0, 0, 0, 0, 0, 0,03, 0,03, 0, 0, 0, 0, 0,47, 0, 0,03,03,02,02,03,02,56,03,02,02,03,
    03, 0, 0,03, 0, 0,03,80, 0,03, 0,03, 0, 0, 0, 0, 0,03, 0, 0,03,03, 0, 0,03,77, 0,03, 0, 0,03,
    03,55,67,03, 0, 0,03, 0,67,03, 0,03, 0,03, 0, 0, 0,03,58, 0,47,03, 0, 0,46, 0, 0,47, 0, 0,03,
    03,03,03,03, 0, 0,03,03,03,03, 0,03, 0,03,03,03,03,03,03,03,03,03, 0, 0,03,03,03,03, 0, 0,03,
    03,02,02,02, 0, 0,02,02,02,03, 0,03,56,02,03,02,02,02,02,02,03,03, 0, 0,02,03,02,02, 0, 0,03,
    03,50, 0, 0, 0, 0, 0, 0, 0,03, 0,49, 0, 0,46, 0, 0, 0, 0, 0,03,03, 0, 0, 0,03, 0, 0, 0, 0,03,
    03,03,03,03,03, 0,03,03,03,03, 0,03, 0, 0,03, 0, 0, 0, 0, 0, 0,03, 0, 0,72,46, 0, 0, 0, 0,46,
    02,02,02,02,02, 0,02,02,02,02, 0,03, 0,57,55, 0, 0, 0, 0, 0,03,03, 0, 0, 0,03, 0, 0, 0,14,03,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03
};


char GraphicData[][40] =
{
//Blank
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,

//Tree
    0x00,0x00, 0x00,0x00, 0x1F,0xF8, 0x1E,0xFC, 0x75,0x54, 0xBA,0xBF, 0xD5,0x55, 0xEE,0xEF, 0xD5,0x55, 0x6A,0xAB,
    0x55,0x55, 0x6E,0xEF, 0x75,0x56, 0x1A,0xBA, 0x1F,0xD6, 0x01,0xFC, 0x01,0xE0, 0x01,0xA0, 0x01,0xA0, 0x01,0xE0,

//Brick
    0x3B,0xBB, 0x1F,0x1F, 0x0E,0x0E, 0x1C,0x1C, 0x38,0x38, 0x70,0x70, 0xE0,0xE0, 0xF1,0xF1, 0xBB,0xBB, 0x1F,0x1F,
    0x0E,0x0E, 0x1C,0x1C, 0x38,0x38, 0x70,0x70, 0xE0,0xE0, 0xF1,0xF1, 0xBB,0xBB, 0x1F,0x1F, 0x0E,0x0E, 0x1C,0x1C,

//Gray
    0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44,
    0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11,

//Man
    0x3F,0xFC, 0x7F,0xFE, 0xFF,0xFE, 0x7F,0xFF, 0x69,0xB6, 0xA0,0x05, 0x60,0x06, 0x20,0x04, 0x19,0x88, 0x04,0x30,
    0x3B,0xCC, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x6F,0xFA, 0x1F,0xF6, 0x38,0x70, 0x38,0x70, 0x1C,0x70, 0x3C,0x78,
    0x3F,0xFC, 0x7F,0xFE, 0xFF,0xFE, 0x7F,0xFF, 0x69,0xB6, 0xA0,0x05, 0x60,0x06, 0x20,0x04, 0x19,0x88, 0x04,0x30,
    0x3B,0xCC, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x5F,0xF6, 0x3F,0xF8, 0x0E,0x1C, 0x0E,0x1C, 0x0E,0x38, 0x1E,0x3C,

//Global View
    0x00,0x00, 0x02,0x08, 0x01,0x7F, 0x00,0x88, 0x01,0x7F, 0x04,0x3E, 0x1A,0x22, 0x27,0x3E, 0x41,0x19, 0x41,0x2E,
    0x21,0x49, 0x22,0x88, 0x24,0x7F, 0x10,0x00, 0x10,0x07, 0x10,0x07, 0x08,0x07, 0x08,0x07, 0x0C,0x03, 0x04,0x03,
    0x00,0x00, 0x08,0x10, 0x0F,0xF8, 0x08,0x10, 0x8F,0xF1, 0x78,0x16, 0x0F,0xF0, 0x08,0x10, 0x0F,0xF0, 0x02,0x40,
    0x0A,0x44, 0x0C,0x44, 0xB8,0x7F, 0x00,0x00, 0x3C,0x20, 0xC4,0x10, 0x04,0x10, 0x04,0x10, 0x04,0x1F, 0x87,0xF0,
    0x00,0x00, 0x08,0x02, 0x08,0x02, 0x08,0x42, 0xFF,0xCF, 0x08,0x02, 0x08,0x17, 0x0C,0x0A, 0x12,0x0A, 0x21,0x02,
    0x41,0x82, 0xFF,0x42, 0xC1,0xF2, 0x41,0x07, 0x41,0x04, 0x41,0x04, 0x42,0x08, 0x42,0x08, 0xFF,0xC8, 0x42,0x3C,
    0x00,0x00, 0x10,0x00, 0x7E,0x00, 0x53,0x00, 0xFF,0xC0, 0x52,0xF0, 0x52,0x38, 0x7E,0x18, 0x10,0x08, 0xFF,0x08,
    0x24,0x08, 0x18,0x18, 0xE6,0xD8, 0x98,0x70, 0x98,0x30, 0x98,0x30, 0x98,0x30, 0x98,0x20, 0xB8,0x60, 0xBF,0xE0,
    0x04,0x03, 0x06,0x03, 0x02,0x03, 0x02,0x01, 0x03,0x01, 0x01,0x01, 0x01,0x01, 0x00,0x81, 0x00,0x80, 0x00,0x80,
    0x00,0x40, 0x00,0x40, 0x00,0x20, 0x00,0x20, 0x00,0x20, 0x00,0x30, 0x00,0x10, 0x00,0x10, 0x00,0x18, 0x00,0x0F,
    0x9C,0x10, 0xC4,0x10, 0xC4,0x10, 0xC2,0x10, 0xC2,0x10, 0xC2,0x7F, 0xC7,0x80, 0xFC,0x00, 0xE1,0xE0, 0xF8,0x00,
    0xE0,0x1F, 0xE0,0x20, 0xE0,0x27, 0x70,0x24, 0x70,0x25, 0x70,0x25, 0x70,0x15, 0x38,0x15, 0x38,0x15, 0xFF,0xFF,
    0x42,0x0B, 0x42,0x09, 0x42,0x09, 0x42,0x09, 0x42,0x11, 0xFE,0x11, 0x01,0xF1, 0x00,0x0F, 0x03,0xC2, 0x00,0x32,
    0xFF,0x02, 0x01,0x02, 0xF9,0x02, 0x05,0x02, 0xF5,0x02, 0xF5,0x06, 0xF5,0x04, 0xF2,0x05, 0xF2,0x05, 0xFF,0xFD,
    0x31,0xE0, 0x30,0xE0, 0x30,0x40, 0x30,0x40, 0x30,0xC0, 0x7C,0xC0, 0x7F,0x80, 0x7F,0x80, 0x7F,0x80, 0x7F,0x80,
    0x7F,0x80, 0xFF,0x00, 0xFF,0x00, 0xFF,0x00, 0xFF,0x00, 0xFE,0x00, 0xFE,0x00, 0xFE,0x00, 0xFE,0x00, 0xFC,0x00,

//DR.
    0x1F,0xF0, 0x3F,0xDC, 0x73,0xF6, 0x5F,0x82, 0x40,0x33, 0x8C,0x19, 0x98,0x0D, 0xB4,0x11, 0xC0,0x41, 0x47,0xE3,
    0x66,0xB2, 0x6F,0xFA, 0x2E,0x3A, 0x3C,0x2E, 0x7E,0x3F, 0x53,0x45, 0x51,0xC5, 0x71,0xC7, 0x33,0xCE, 0x7F,0xFF,

//Dr. House(3x2)
    0x00,0x3F, 0x00,0x3A, 0x00,0x28, 0x00,0x46, 0x00,0x52, 0x00,0xA9, 0x00,0xA4, 0x01,0xA3, 0x01,0x41, 0x01,0x00,
    0x02,0x00, 0x04,0xC0, 0x04,0xBF, 0x09,0x0D, 0x0A,0x15, 0x32,0x17, 0x42,0x00, 0x8C,0x1F, 0x88,0x00, 0xFF,0xFF,
    0xFF,0xFC, 0x22,0x22, 0x00,0x01, 0x8A,0x8A, 0x00,0x00, 0xA2,0x22, 0x40,0x00, 0x2A,0xAA, 0xB0,0x00, 0xCA,0x22,
    0x66,0x00, 0x31,0x8A, 0x08,0x80, 0x04,0x62, 0x02,0x30, 0x81,0x8E, 0x00,0xC3, 0x00,0x20, 0x00,0x13, 0xFF,0xFE,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0xC0,0x00, 0x60,0x00, 0x30,0x00, 0x08,0x00, 0xAE,0x00, 0x01,0x80, 0x22,0x40,
    0x00,0x20, 0x8A,0x98, 0x00,0x0E, 0x22,0x23, 0x00,0x7F, 0xBF,0x83, 0xE0,0x1C, 0x01,0xE4, 0xFE,0x08, 0x00,0x08,
    0x08,0x00, 0x07,0xFF, 0x04,0x00, 0x04,0x00, 0x04,0x00, 0x04,0x00, 0x02,0x00, 0x03,0x3F, 0x01,0x20, 0x00,0xA7,
    0x00,0xAB, 0x00,0x8B, 0x00,0x8B, 0x00,0x8B, 0x00,0x89, 0x00,0x85, 0x00,0xE5, 0x00,0x1F, 0x00,0x00, 0x00,0x00,
    0x00,0x10, 0xFF,0xE0, 0x00,0x20, 0x00,0x20, 0x00,0x23, 0x00,0x22, 0x00,0x23, 0xE0,0x21, 0x38,0x21, 0xC4,0x21,
    0xE8,0x21, 0xE8,0x40, 0xE8,0x40, 0xE8,0x43, 0xE8,0x40, 0xE8,0x40, 0xE8,0x40, 0xE8,0x40, 0x7E,0x4F, 0x01,0xF0,
    0x00,0x08, 0x00,0x08, 0x00,0x18, 0x00,0x10, 0xFE,0x10, 0x02,0x10, 0xF4,0x20, 0x34,0x20, 0x74,0x20, 0x74,0x40,
    0xFA,0x40, 0x02,0x40, 0x3E,0x40, 0xC0,0x80, 0x00,0x80, 0x00,0x80, 0x03,0x80, 0x3C,0x00, 0xE0,0x00, 0x00,0x00,

//Sleep
    0xBF,0xFD, 0xFF,0xFF, 0xFF,0xFF, 0xFF,0xFF, 0xE9,0xB7, 0xA0,0x05, 0xE0,0x07, 0xA0,0x05, 0x99,0x89, 0x84,0x31,
    0xFF,0xFF, 0x80,0x01, 0xBF,0xFD, 0xEA,0xAB, 0xC4,0x45, 0xAA,0xAB, 0xD1,0x15, 0xAA,0xAB, 0xFF,0xFD, 0xC0,0x03,

//Office (4x2)
    0x00,0x00, 0x00,0xFF, 0x01,0xC4, 0x02,0xEA, 0x04,0x3F, 0x0A,0x3E, 0x10,0x14, 0x1A,0xAA, 0x20,0x05, 0x62,0x23,
    0x82,0x21, 0xAB,0xE8, 0x82,0x20, 0xA2,0x22, 0x82,0xE0, 0xAA,0x2A, 0x83,0xE0, 0xA2,0x22, 0x80,0x00, 0xA8,0xA8,
    0x00,0x00, 0xF0,0x00, 0x78,0x00, 0xFC,0x00, 0x12,0x00, 0xAB,0x00, 0x44,0x80, 0xAA,0xC0, 0x17,0xE0, 0xFF,0xF0,
    0x80,0x08, 0xFF,0xFC, 0xD5,0x58, 0xAA,0xA8, 0xD7,0xD8, 0xAB,0xE8, 0xD5,0x58, 0xAA,0xA8, 0xD5,0x58, 0xAA,0xA8,

//Smile
    0x00,0x00, 0x00,0x00, 0x03,0xE0, 0x0C,0x18, 0x10,0x04, 0x20,0x02, 0x20,0x02, 0x42,0x21, 0x40,0x01, 0x40,0x01,
    0x40,0x01, 0x48,0x09, 0x48,0x09, 0x24,0x12, 0x23,0xE2, 0x10,0x04, 0x0C,0x18, 0x03,0xE0, 0x00,0x00, 0x00,0x00,

    0x00,0x00, 0x00,0x07, 0x00,0x38, 0x00,0xF7, 0x03,0x22, 0x02,0x22, 0x02,0x72, 0x02,0xD3, 0x02,0x56, 0x02,0x52,
    0x02,0x52, 0x02,0xF4, 0x02,0x08, 0x02,0x00, 0x02,0x00, 0x02,0xA8, 0x02,0x00, 0x02,0x22, 0x01,0xFF, 0x00,0x00,
    0x80,0x00, 0xA2,0x22, 0x00,0x00, 0xE0,0x40, 0x4F,0xFD, 0x49,0x25, 0x42,0x20, 0x4C,0xBC, 0xE0,0x80, 0x47,0xE0,
    0x41,0x20, 0x42,0x24, 0x4C,0x3D, 0x03,0xE0, 0x05,0xD0, 0xA9,0xC8, 0x09,0xC8, 0x29,0xCA, 0x99,0xC8, 0xFF,0xFF,
    0xD5,0x5C, 0xFF,0xFF, 0x64,0x44, 0x08,0x2A, 0xFF,0xBF, 0x00,0xBF, 0xFF,0x04, 0x22,0x2A, 0xFF,0x31, 0x08,0x2F,
    0xFF,0x35, 0x08,0x2A, 0xFF,0xB5, 0x00,0x2A, 0x00,0x35, 0xA8,0xAA, 0x00,0x35, 0x22,0x2A, 0x00,0x35, 0xFF,0xFF,
    0x00,0x00, 0xF8,0x00, 0x44,0x00, 0xAB,0x00, 0xD1,0x80, 0xFE,0xE0, 0xFC,0x50, 0xAF,0xEC, 0x17,0xF3, 0xFF,0xFC,
    0x7D,0x58, 0xAE,0xA8, 0x65,0x58, 0xBE,0xA8, 0x55,0x58, 0xAA,0xA8, 0x55,0x58, 0xAA,0xA8, 0x7F,0xF8, 0xC0,0x00,

//Chemical
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x07,0xE0, 0x04,0x20, 0x04,0x60, 0x02,0x40, 0x02,0x40, 0x02,0x40, 0x04,0x40,
    0x08,0x20, 0x10,0x10, 0x1D,0xF8, 0x1D,0xF8, 0x1F,0xF8, 0x1F,0xF0, 0x0F,0xF0, 0x07,0xE0, 0x03,0x80, 0x00,0x00,

//Rich House(3x3)
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0xFF, 0x3F,0x22, 0x40,0x00, 0x6F,0xAA,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x01, 0x00,0x0F, 0x00,0x0F, 0x00,0x0F,
    0x00,0x1F, 0x00,0x1F, 0x00,0x1F, 0x00,0x1F, 0x00,0x1F, 0x00,0x3F, 0xC0,0x3F, 0x3F,0xFF, 0x00,0x7F, 0xAA,0xAF,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x1F,0xE0, 0xFF,0xD8, 0xFF,0xAC, 0xFF,0xD4, 0xFF,0xA8,
    0xFF,0x58, 0xFF,0xA8, 0xFF,0x58, 0xFF,0xB0, 0xFF,0x50, 0xFE,0xB0, 0xFF,0x60, 0xFE,0xA0, 0xFD,0x60, 0xFE,0xA0,
    0x60,0x00, 0x7E,0x22, 0x23,0x80, 0x3A,0x8A, 0x20,0x00, 0x3A,0x22, 0x30,0x00, 0x3A,0xAA, 0x10,0x00, 0x12,0x22,
    0x10,0xFC, 0x1F,0x0F, 0x11,0x0C, 0x11,0x0C, 0x11,0x0C, 0x08,0x8C, 0x08,0x88, 0x08,0x88, 0x0F,0xFF, 0x78,0x00,
    0x00,0x00, 0x22,0x22, 0x00,0x00, 0x8A,0x8A, 0x00,0x01, 0x22,0x23, 0x00,0x01, 0xAA,0xAB, 0x00,0x01, 0x22,0x23,
    0x00,0x03, 0xFA,0x8B, 0x37,0x03, 0x20,0xFF, 0x20,0x87, 0x20,0x87, 0x20,0x87, 0x21,0x07, 0xA1,0x07, 0xFF,0x0F,
    0xFD,0x40, 0xFE,0xC0, 0xFD,0x70, 0xFA,0xCC, 0xFD,0x42, 0xFA,0xE2, 0xFD,0x82, 0xFA,0xAA, 0xF5,0x84, 0xFA,0xA4,
    0xF5,0x84, 0xEB,0x8C, 0xF5,0x0C, 0xEB,0x22, 0xF5,0x01, 0xEA,0xAB, 0xD6,0x01, 0xEB,0xA3, 0xD6,0x71, 0xEE,0x4B,
    0x80,0x00, 0x80,0x00, 0x9F,0xFF, 0xFF,0xFF, 0xFF,0xFF, 0x3F,0xFF, 0x11,0xC0, 0x11,0x00, 0x11,0x00, 0x11,0x7F,
    0x11,0x40, 0x11,0x7F, 0x11,0x44, 0x12,0x44, 0x12,0x44, 0x12,0x44, 0x12,0x44, 0x12,0x44, 0x7F,0xFF, 0x00,0x00,
    0x03,0xFF, 0x00,0x0F, 0xC0,0x0F, 0xFE,0x3F, 0xFF,0xCF, 0xFF,0xCF, 0x18,0xCF, 0x08,0xBF, 0x08,0x8F, 0xE8,0x8F,
    0x29,0x0F, 0xE9,0x0F, 0x69,0x0F, 0x69,0x1F, 0x49,0x1F, 0x4A,0x1F, 0x4A,0x1F, 0x4F,0xFE, 0xFF,0xFF, 0x01,0xFF,
    0xD4,0x4F, 0xAC,0x89, 0xD4,0x91, 0xAC,0x91, 0xD8,0x93, 0xBF,0xFF, 0x7F,0xFF, 0xC0,0x01, 0x40,0x3D, 0xDD,0x81,
    0x43,0x79, 0xC0,0x01, 0x47,0x3D, 0xC0,0x01, 0x7F,0xFF, 0xBA,0x38, 0x52,0x38, 0xB2,0x30, 0xFA,0x30, 0xFB,0xF0,
//Error (39)(0x27)
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,

//Rapid(3x2)
    0x00,0x00, 0x00,0x01, 0x00,0x03, 0x00,0x3F, 0x00,0x7F, 0x00,0xFF, 0x00,0x01, 0x00,0x00, 0x00,0x1F, 0x00,0xF8,
    0x01,0x90, 0x01,0x17, 0x01,0x38, 0x01,0x17, 0x01,0x98, 0x00,0xB7, 0x00,0x92, 0x00,0x92, 0x00,0x95, 0x01,0x78,
    0xFC,0x00, 0xC0,0x00, 0xBF,0x00, 0xFF,0x80, 0xE3,0xFF, 0xC7,0xFE, 0xFF,0xFD, 0xFD,0xC0, 0x03,0x80, 0x3F,0x00,
    0x84,0xFE, 0xF2,0xBA, 0xA4,0x10, 0xF2,0x7C, 0xA0,0x54, 0xE6,0x7C, 0x82,0x54, 0xF2,0xFE, 0x85,0x11, 0xF4,0xFF,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0xE0,0x00, 0x30,0x00, 0x3C,0x00, 0x3E,0x00,
    0x7F,0x00, 0x7F,0xC0, 0x7F,0xE0, 0x7F,0xF0, 0xFF,0xF0, 0xFF,0xE0, 0xFF,0xE0, 0xFF,0xE0, 0xFF,0xC0, 0xFF,0xC0,
    0x02,0xC0, 0x02,0x7F, 0x0A,0x53, 0x14,0x32, 0x14,0x12, 0x14,0x12, 0x24,0x12, 0x24,0x12, 0x24,0x12, 0x44,0x12,
    0x44,0x12, 0x22,0x12, 0x21,0x92, 0x02,0x5F, 0x1E,0x70, 0x08,0x5F, 0x08,0x40, 0x08,0x7F, 0x0C,0x40, 0x01,0xFF,
    0x3C,0xF1, 0xE7,0x9F, 0xE4,0x90, 0x24,0x90, 0x27,0x9E, 0xE7,0x9E, 0xE7,0x9E, 0xE7,0x9E, 0xE7,0x9E, 0xE7,0x9C,
    0xE7,0x9C, 0xE7,0x9C, 0xE7,0x9C, 0xFF,0xFF, 0x00,0x00, 0xFF,0x0B, 0x00,0x0A, 0xFC,0x0A, 0x00,0x0A, 0xFF,0xFF,
    0xFF,0xC0, 0xFF,0x80, 0x3C,0x80, 0x38,0x40, 0x38,0x38, 0x70,0x24, 0x70,0x24, 0x70,0x24, 0x60,0x24, 0x60,0x24,
    0x40,0x24, 0x80,0x24, 0x80,0x44, 0xC0,0x44, 0x40,0x44, 0x60,0xC4, 0x10,0xFC, 0x0E,0xA0, 0x0B,0xE0, 0xFD,0xE0,

//Door Close
    0xFF,0xFF, 0xAB,0xEA, 0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xAB,0x6A,
    0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xFF,0x7F, 0x01,0x60, 0x01,0x60, 0x01,0x60, 0x01,0x60, 0x01,0x60, 0x01,0xE0,

//Door Open
    0xFF,0xFF, 0xAB,0xEA, 0x56,0xD5, 0xAD,0x6A, 0x5A,0x55, 0xBC,0x6A, 0x68,0x55, 0xA8,0x6A, 0x68,0x55, 0xA8,0x6A,
    0x68,0x55, 0xA8,0x6A, 0x68,0x55, 0xE8,0x7F, 0x28,0x80, 0x29,0x00, 0x2A,0x00, 0x3C,0x00, 0x00,0x00, 0x00,0x00,

//Stair1
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x01,0xFF, 0x01,0x80, 0x01,0x40, 0x01,0x20, 0x0F,0x1F, 0x0C,0x95, 0x0A,0x5A,
    0x09,0x35, 0x78,0xFA, 0x64,0xD5, 0x52,0xAA, 0x49,0xD5, 0x47,0xAA, 0x45,0x55, 0x26,0xAA, 0x15,0x55, 0x0E,0xAA,

//Stair2
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0xFF,0x80, 0x01,0x80, 0x02,0x80, 0x04,0x80, 0xF8,0xF0, 0xA9,0x30, 0x5A,0x50,
    0xAC,0x90, 0x5F,0x1E, 0xAB,0x26, 0x55,0x4A, 0xAB,0x92, 0x55,0xE2, 0xAA,0xA2, 0x55,0x64, 0xAA,0xA8, 0x55,0x70,

//Flower
    0x00,0x60, 0x00,0xF0, 0x00,0x90, 0x30,0x90, 0x38,0xB0, 0x2C,0xE0, 0x25,0xC0, 0x13,0x00, 0x0B,0x00, 0x0F,0xE0,
    0x37,0x58, 0x6B,0xAC, 0x77,0x5C, 0x4F,0xE4, 0x70,0x1C, 0x2F,0xE8, 0x20,0x08, 0x10,0x10, 0x10,0x10, 0x0F,0xE0,

//Home (2x2)
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0xFF, 0x01,0x44, 0x03,0xAA, 0x02,0x91,
    0x05,0xEA, 0x05,0x44, 0x0A,0xEA, 0x16,0x31, 0x14,0xBA, 0x3E,0x34, 0x58,0xBA, 0xFA,0x39, 0xF8,0x8E, 0x4A,0x26,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0xFF,0xC0, 0x44,0x40, 0xAA,0xA0, 0x11,0x20,
    0xAA,0xB0, 0x44,0x50, 0xAA,0xA8, 0x11,0x18, 0xAA,0xAC, 0x44,0x44, 0xAA,0xAA, 0x11,0x12, 0xAA,0xAB, 0x44,0x45,
    0x08,0x8F, 0x0A,0x23, 0x08,0x88, 0x0A,0x22, 0x08,0x88, 0x0B,0xE2, 0x09,0x38, 0x0B,0x12, 0x09,0x18, 0x0B,0x12,
    0x05,0x18, 0x07,0x12, 0x05,0x18, 0x07,0x12, 0x05,0x18, 0x07,0x12, 0x01,0x18, 0x00,0xF2, 0x00,0x1C, 0x00,0x03,
    0xAA,0xFE, 0xFF,0xD6, 0xAA,0xBA, 0xDD,0x76, 0xB6,0xDA, 0xD5,0x56, 0xB6,0xFA, 0xDD,0x56, 0xAA,0xAA, 0xD5,0x56,
    0xAA,0xAA, 0xD5,0x56, 0xAA,0xAA, 0xD5,0x56, 0xAA,0xAB, 0xD5,0x55, 0xEA,0xAB, 0x55,0x7F, 0xEF,0xC0, 0xF8,0x00,

//Table
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0xFF,0xFF, 0xAA,0xAB, 0xD5,0x55, 0xAA,0xAB, 0xD5,0x55, 0xAA,0xAB,
    0xD5,0x55, 0xFF,0xFF, 0x80,0x01, 0xFF,0xFF, 0x54,0x2A, 0x5C,0x3A, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x70,0x0E,

//Cabinet
    0xFF,0xFF, 0xA0,0x06, 0x60,0x05, 0xA0,0x06, 0x60,0x05, 0xBF,0xFE, 0x60,0x05, 0xAF,0xF6, 0x68,0x15, 0xA9,0x96,
    0x68,0x15, 0xAF,0xF6, 0x60,0x05, 0xEF,0xF7, 0x28,0x14, 0x29,0x94, 0x28,0x14, 0x2F,0xF4, 0x20,0x04, 0x3F,0xFC,

//Girl
    0x0F,0xFC, 0x1B,0xFE, 0x39,0xFE, 0x30,0x7F, 0x20,0x1F, 0x40,0x1F, 0x44,0x27, 0x20,0x01, 0x20,0x02, 0x22,0x22,
    0x51,0xC5, 0x6E,0x1F, 0xC7,0xF1, 0x0C,0x18, 0x14,0x14, 0x14,0x14, 0x14,0x14, 0x1C,0x1C, 0x07,0xF0, 0x0F,0x38,

//Bed
    0xDF,0xFB, 0xA0,0x05, 0xA0,0x05, 0xA0,0x05, 0xA0,0x05, 0x9F,0xF9, 0xBF,0xFD, 0xC0,0x03, 0x80,0x01, 0xBF,0xFD,
    0xC4,0x47, 0xAA,0xAB, 0x91,0x11, 0xAA,0xAB, 0xC4,0x45, 0xAA,0xAB, 0x91,0x11, 0xAA,0xAB, 0xFF,0xFD, 0xC0,0x03,

//Police
    0x0F,0xE0, 0x70,0x18, 0x80,0x04, 0x80,0x14, 0x9F,0xCE, 0xC0,0x0A, 0x7F,0xFB, 0x80,0x01, 0x80,0x02, 0xC0,0x02,
    0x63,0x84, 0x20,0x08, 0x1F,0xF0, 0x22,0x8C, 0x41,0x03, 0x8D,0x6D, 0xB1,0x0B, 0xDF,0xF8, 0x1F,0xF8, 0x3F,0x7C,

//Slingshot
    0x00,0x00, 0x00,0x00, 0x60,0x30, 0x90,0x48, 0xF8,0x7C, 0xFC,0x7C, 0xBC,0x6C, 0x96,0x4E, 0xB3,0x6A, 0x91,0xCB,
    0xA8,0xE9, 0x8F,0xE9, 0x62,0x71, 0x28,0xBB, 0x12,0x4E, 0x18,0xC0, 0x12,0x40, 0x18,0xC0, 0x1A,0xC0, 0x0F,0x80,

//Ticket Machine
    0xFF,0xFF, 0xA0,0x06, 0x60,0x05, 0xA0,0x06, 0x60,0x05, 0xBF,0xFE, 0x7F,0xFD, 0xB0,0x0E, 0x76,0xCD, 0xB0,0x0E,
    0x75,0x6D, 0xB0,0x0E, 0x77,0xED, 0xFF,0xFF, 0x31,0x0C, 0x3F,0xFC, 0x3B,0x9C, 0x3F,0xFC, 0x31,0x0C, 0x3F,0xFC,

//Money
    0x00,0x00, 0x00,0x00, 0x00,0x0C, 0x00,0x1E, 0x00,0x37, 0x00,0x7B, 0x00,0xDD, 0x03,0xA2, 0x0F,0x61, 0x3A,0xA2,
    0xF7,0x57, 0x7B,0xEE, 0x35,0x78, 0x1B,0xB0, 0x0D,0xE0, 0x07,0xC0, 0x03,0x80, 0x00,0x00, 0x00,0x00, 0x00,0x00,

//Ticket
    0x00,0x00, 0x3F,0xF8, 0x2A,0xB8, 0x2A,0xB8, 0x2B,0xF8, 0x2B,0xF8, 0x2A,0x38, 0x2A,0x38, 0x2A,0x38, 0x2A,0x38,
    0x2A,0x38, 0x2A,0x38, 0x2A,0x38, 0x2B,0x38, 0x2C,0xB8, 0x22,0xB8, 0x22,0xB8, 0x22,0xB8, 0x3F,0xF8, 0x00,0x00,

//Cellphone
    0x00,0x00, 0x18,0x00, 0x18,0x00, 0x18,0x00, 0x3F,0x80, 0x20,0x60, 0x2F,0x90, 0x30,0x50, 0x30,0x30, 0x30,0x30,
    0x30,0x30, 0x2F,0xD0, 0x20,0x10, 0x2D,0x50, 0x20,0x10, 0x2D,0x50, 0x20,0x10, 0x2D,0x50, 0x18,0x60, 0x0F,0xC0,

//Streetlamp
    0x01,0x00, 0x03,0x80, 0x05,0x40, 0x0F,0xE0, 0x04,0x40, 0x04,0x40, 0x03,0x80, 0x01,0x00, 0x01,0x00, 0x01,0x00,
    0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x03,0x80, 0x07,0xC0, 0x0F,0xE0,

//Invoice
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x7F,0xE0, 0x40,0x30, 0x40,0x28, 0x5E,0x3C, 0x40,0x04, 0x4B,0xC4,
    0x40,0x04, 0x5D,0xD4, 0x40,0x04, 0x47,0xE4, 0x58,0x04, 0x40,0x04, 0x40,0x74, 0x40,0x04, 0x7F,0xFC, 0x00,0x00,

//Computer
    0x1F,0xFC, 0x18,0x0C, 0x14,0x14, 0x13,0xE4, 0xF2,0x27, 0xB2,0x27, 0xD3,0xF5, 0xBF,0xFF, 0xC6,0x31, 0xAC,0x1B,
    0xDB,0xED, 0xFF,0xFF, 0x80,0x01, 0xFF,0xFF, 0x54,0x2A, 0x5C,0x3A, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x70,0x0E,

//CC800
    0x0C,0x00, 0x0F,0x00, 0x0B,0xC0, 0x08,0xF0, 0x0B,0x3C, 0x0A,0xCF, 0x0A,0x33, 0x09,0x0D, 0x16,0xC5, 0x27,0xB5,
    0x38,0xED, 0x42,0x39, 0x90,0x8F, 0xC4,0x25, 0xF1,0x0F, 0x3C,0x5E, 0x0F,0x3C, 0x03,0xF8, 0x00,0xF0, 0x00,0x60,

//Water
    0x05,0x18, 0x0A,0x2C, 0x1C,0x46, 0x78,0x8B, 0x51,0x11, 0x62,0x23, 0xC4,0x45, 0x88,0x8B, 0x91,0x14, 0xA2,0x24,
    0xC4,0x46, 0x68,0x8B, 0x31,0x11, 0x22,0x3B, 0x64,0x7F, 0x68,0xAE, 0x71,0xE0, 0x3B,0x80, 0x1F,0x00, 0x00,0x00,

//Cabinet Open
    0xFF,0xFF, 0xA0,0x05, 0x60,0x06, 0xA0,0x05, 0x60,0x06, 0xBF,0xFD, 0x60,0x06, 0xAF,0xF5, 0x6D,0x6A, 0xAA,0xA4,
    0x6D,0x62, 0xAF,0xF2, 0x60,0x0A, 0xEF,0xF6, 0x2D,0x6A, 0x2A,0xA4, 0x2D,0x62, 0x2F,0xF2, 0x20,0x0A, 0x3F,0xFE,

//Bad Man Left
    0x07,0xF0, 0x1F,0xFC, 0x3F,0xFE, 0x71,0xFE, 0xE0,0x5F, 0xFF,0xFF, 0x7D,0xEF, 0x3D,0xCE, 0x10,0x0C, 0x10,0x38,
    0x1F,0xD8, 0x04,0x24, 0x0C,0x24, 0x14,0x24, 0x13,0xE4, 0x16,0xBC, 0x1D,0xD8, 0x06,0xA8, 0x05,0xD8, 0x1F,0xFC,

//Bad Man Right
    0x0F,0xE0, 0x3F,0xF8, 0x7F,0xFC, 0x7F,0x8E, 0xFA,0x07, 0xFF,0xFF, 0xF7,0xBE, 0x73,0xBC, 0x30,0x08, 0x1C,0x08,
    0x1B,0xF8, 0x24,0x20, 0x24,0x30, 0x24,0x28, 0x27,0xC8, 0x3D,0x68, 0x1B,0xB8, 0x15,0x60, 0x1B,0xA0, 0x3F,0xF8,

//Rapid
    0xFF,0x98, 0x81,0x58, 0x00,0xB8, 0x00,0x98, 0x00,0x68, 0x30,0x54, 0x48,0x4A, 0x48,0x45, 0x48,0x63, 0x48,0x71,
    0x48,0x79, 0x48,0x7D, 0x48,0x7F, 0x48,0x7F, 0x30,0x7F, 0x00,0x7F, 0x00,0x5F, 0x00,0x4F, 0xFF,0xE7, 0x80,0x13,
    0x40,0x09, 0xFF,0xE5, 0x00,0x53, 0x00,0x49, 0x30,0x65, 0x48,0x63, 0x48,0x71, 0x48,0x79, 0x48,0x7D, 0x48,0x7F,
    0x48,0x7F, 0x48,0x7F, 0x48,0x7F, 0x30,0x7F, 0x00,0x5F, 0x00,0x4F, 0xFF,0xE7, 0x40,0x13, 0x20,0x09, 0xFF,0xE5,
    0x00,0x53, 0x00,0x49, 0x30,0x45, 0x48,0x63, 0x48,0x71, 0x48,0x79, 0x48,0x7D, 0x48,0x7F, 0x48,0x7F, 0x48,0x7F,
    0x48,0x7F, 0x30,0x5F, 0x00,0x4F, 0xFF,0xC7, 0x80,0x23, 0x40,0x11, 0x27,0x89, 0x13,0xC5, 0x09,0xE3, 0x07,0xFF,

//Track
    0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98,
    0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98,

//Closestool
    0x07,0xE0, 0x08,0x10, 0x13,0xC8, 0x24,0x24, 0x24,0x24, 0x24,0x24, 0x24,0x24, 0x24,0x24, 0x13,0xC8, 0x08,0x10,
    0x0F,0xF0, 0x10,0x08, 0x27,0xE4, 0x27,0xE4, 0x30,0x0C, 0x2F,0xF4, 0x10,0x08, 0x10,0x08, 0x0F,0xF0, 0x1F,0xF8,

//Toilet paper
    0x00,0x00, 0x00,0x18, 0x00,0xE8, 0x03,0x04, 0x1C,0x04, 0x60,0x02, 0x40,0x02, 0x20,0x01, 0x60,0x06, 0x50,0x7B,
    0x73,0x9F, 0x6C,0xED, 0x37,0x36, 0x78,0xD8, 0x73,0x63, 0x3D,0xBC, 0x37,0xC0, 0x1C,0x00, 0x08,0x00, 0x00,0x00,

//Sad
    0x00,0x00, 0x00,0x00, 0x03,0xE0, 0x0C,0x18, 0x10,0x04, 0x20,0x02, 0x20,0x02, 0x42,0x21, 0x40,0x01, 0x40,0x01,
    0x40,0x01, 0x43,0xE1, 0x44,0x11, 0x28,0x0A, 0x20,0x02, 0x10,0x04, 0x0C,0x18, 0x03,0xE0, 0x00,0x00, 0x00,0x00,

//Asistant
    0x03,0xC0, 0x0F,0xF0, 0x1E,0x30, 0x1C,0x18, 0x30,0x0C, 0x72,0x26, 0x20,0x08, 0x20,0x08, 0x19,0xC8, 0x08,0x10,
    0x07,0xF8, 0x1F,0x5E, 0x23,0xD1, 0x4F,0xDF, 0xBF,0xF0, 0x4F,0xD0, 0x07,0x30, 0x0F,0x98, 0x1F,0xC4, 0x1E,0x7C
};

//----------------------------------------------------------------
//int CheckStatus(void);
//void DrawGraphic(int x, int y, int iObjectID);
//void DrawMap(void);
//void DisplayMessage(int iObjectID, char *sMessage);
//int IsWalkable(void);
//void Talk(void);
//void Search(void);
//int DisplayMenu(int x, int y, char sItems[][11], unsigned char *caObject, int iItemCount);
//void RapidMove(void);
//void RapidBack(void);
//----------------------------------------------------------------
int max_ThingCount;
char mem_ThingBox[10];
char str_ThingBox[10][11];

char str_MenuItem[3][11] =
{
    "½»Ì¸¡¡¡¡  ",
    "²é¿´ËÄÖÜ  ",
    "Ê¹ÓÃÎïÆ·  "
};

int cnt_MenuItem;
int g_iStory;
int man_x, man_y;
int map_x, map_y;
int rec_x, rec_y;
int rec_man_x, rec_man_y;
int rec_map_x, rec_map_y;
char max_width_obj, max_height_obj;
char cur_room;
//----------------------------------------------------------------
//int _WIDTH = 160;
//int _HEIGHT = 80;
//
long check_WIDTH_HEIGHT()
{
    //_WIDTH = LCD_W;
    //_HEIGHT = LCD_H;
#define _WIDTH  LCD_W
#define _HEIGHT LCD_H
    return -1;
}

//----------------------------------------------------------------
void DrawGraphic(int x, int y, int iObjectID)
{
    WriteBlock(x * OBJECT_WIDTH_DOT, y * OBJECT_HEIGHT_DOT, 16, 20, WB_COPY, GraphicData[iObjectID]); //fix.
}

void DrawBlock(int x, int y, int mode)
{
    x = x * OBJECT_WIDTH_DOT;
    y = y * OBJECT_HEIGHT_DOT;
    Block(x, y, x + (OBJECT_WIDTH_DOT - 1), y + (OBJECT_HEIGHT_DOT - 1), mode);
}

//¿Õ¼ä²»×ã£¬ÔÝÊ±¸ÄÎª²»´«²ÎÊý
void set_room(char room)
{
    cur_room = room;
    if (cur_room == 1)
    {// ÆÕÍ¨·¿¼ä
        max_width_obj = 160/OBJECT_WIDTH_DOT;
        max_height_obj = 80/OBJECT_HEIGHT_DOT;
    }
    else if (cur_room == 2)
    {// ´óµØÍ¼-Ï«Ö¹
        max_width_obj = LCD_MAX_WIDTH_OBJ;
        if (max_width_obj > 11)
        {
            max_width_obj = 11;//debug
        }
        max_height_obj = LCD_MAX_HEIGHT_OBJ;
    }
    else if (cur_room == 3)
    {// ÑÐ¾¿Ëù/°ó¼ÜÎÝ
        max_width_obj =160/OBJECT_WIDTH_DOT;
        max_height_obj = LCD_MAX_HEIGHT_OBJ;
    }
    else //if (cur_room == 0)
    {// ´óµØÍ¼
        max_width_obj = LCD_MAX_WIDTH_OBJ;
        max_height_obj = LCD_MAX_HEIGHT_OBJ;
    }
}
//void DrawMap(int iMapX, int iMapY, int iManX, int iManY)
void DrawMap()
{
    int x, y;

    for (y = 0; y < LCD_MAX_HEIGHT_OBJ; y = y + 1)
    {
        for (x = 0; x < LCD_MAX_WIDTH_OBJ; x = x + 1)
        {
            if (x >= max_width_obj || y >= max_height_obj)
            {
                //DrawGraphic(x, y, 0);
                //DrawGraphic(x, y, 3);
                if (cur_room == 2)
                {// ´óµØÍ¼-Ï«Ö¹
                    DrawGraphic(x, y, OBJ_TREE);
                }
                else
                {
                    DrawBlock(x, y, 1);
                }
            }
            else
            {
                DrawGraphic(x, y, MapData[map_y + y][map_x + x]);
            }
        }
    }
}

//----------------------------------------------------------------
void RapidMove()
{
    man_y = 4;

    map_x = 0;
    map_y = 15;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 73;
    MapData[16][0] = 74;
    MapData[17][0] = 75;
    MapData[18][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 74;
    MapData[16][0] = 75;
    MapData[17][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 75;
    MapData[16][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);
}

//----------------------------------------------------------------
void RapidBack()
{
    MapData[15][0] = 76;
    MapData[16][0] = 76;
    MapData[17][0] = 76;
    MapData[18][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 74;
    MapData[16][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 73;
    MapData[16][0] = 74;
    MapData[17][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 76;
    MapData[16][0] = 73;
    MapData[17][0] = 74;
    MapData[18][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);
}

//----------------------------------------------------------------
void DisplayMessage(int iObjectID, addr sMessage)
{
    int x0, f_end;
    int i, n;
    char ch[3];
    int lcd_w, lcd_h;
    lcd_w = max_width_obj * OBJECT_WIDTH_DOT;
    lcd_h = max_height_obj * OBJECT_HEIGHT_DOT;
    Block(1, lcd_h-20, lcd_w-1, lcd_h-1, 0);//fix.
    Rectangle(20, lcd_h-20, lcd_w-1, lcd_h-1, 1);//fix.
    WriteBlock(0 *16, lcd_h-20, 16, 20, WB_COPY, GraphicData[iObjectID]); //fix.
    //DrawGraphic(0, LCD_HEIGHT_END, iObjectID);

    ch[2] = 0;
    f_end = 0;
    x0 = 24;
    lcd_w = ((lcd_w - 40) / 6) & ~1;
    for (;;)
    {
        for (n = 0; n < lcd_w; n++)
        {
            ch[0] = *(sMessage+n);
            if (ch[0] == 0)
            {
                f_end = 1;
                break;
            }
            if (ch[0] & 0x80)
            {
                n = n + 2;
                break;
            }
            if (ch[0] == ' ')
            {
                if (n == 0)
                {
                    sMessage++;
                    n--;
                    continue;
                }
                n++;
                break;
            }
        }
        if (x0 > 24+(lcd_w+1)*6-n*6)
        {
            TextOut(24+lcd_w*6, lcd_h-16, ">>", WB_COPY);
            Refresh();
            getchar();
            Block(24, lcd_h-16, 23+(lcd_w+2)*6, lcd_h-5, 0);
            x0 = 24;
        }
        if (*sMessage != 0)
        {
            for(i=0; i<n; i++)
            {
                ch[0] = *sMessage++;
                ch[1] = 0;
                if (ch[0] & 0x80)
                {
                    ch[1] = *sMessage++;
                    i++;
                }
                TextOut(x0, lcd_h-16, ch, WB_COPY);
                Refresh();
                if (ch[1] == 0)
                {
                    x0 = x0 + 6;
                    Delay(25);
                }
                else
                {
                    x0 = x0 + 12;
                    Delay(50);
                }
            }
        }
        if (f_end != 0)
        {
            getchar();
            break;
        }
    }
}

//----------------------------------------------------------------
int DisplayMenu(addr sItems, addr caObject, int iItemCount) //
{
    int i, iBase, iThingIndex, x_dot, y_dot, iSelected, iTemp;
    int ch;

    iBase = 0;
    iSelected = 0;

    while (1)
    {
        Block(30, 19, 112, 79, 0);//fix.
        //Rectangle(30, 19, 112, 79, 1);//fix.
        for (i = 0; i < 3; i++)
        {
            iThingIndex = iBase + i;
            if (iThingIndex < iItemCount)
            {
                if (caObject != NULL)
                {
                    DrawGraphic(2, i + 1, *(caObject + iThingIndex));
                    x_dot = 50;
                }
                else
                {
                    x_dot = 34;
                }
                y_dot = (i + 1) *20+4;
                TextOut(x_dot, y_dot, sItems + iThingIndex * 11, WB_COPY);
            }
            else
            {
                break;
            }
        }
        iTemp = (iSelected + 1) *20+2;
        Block(x_dot, iTemp, x_dot + 5 * 12 - 1, iTemp + 15, WB_NOT);//fix.
        Rectangle(30, 19, 112, 79, 1);//fix.
        Refresh();
        ch = getchar();
        if (ch == KEY_UP || ch=='w')
        {
            if (iSelected > 0)
            {
                iSelected--;
            }
            else
            {
                if (--iBase < 0)
                {
                    if (iItemCount<3)
                    {
                        iBase = 0;
                        iSelected = iItemCount - 1;
                    }
                    else
                    {
                        iBase = iItemCount - 3;
                        iSelected = 2;
                    }
                }
            }
        }
        else if (ch == KEY_DOWN || ch=='s')
        {
            if (iSelected < 2 && iSelected < iItemCount - 1)
            {
                iSelected++;
            }
            else
            {
                if (++iBase > iItemCount - 3)
                {
                    iBase = 0;
                    iSelected = 0;
                }
            }
        }
        else if (ch == KEY_ENTER || ch=='k'|| ch=='.' || ch==KEY_F1)
        {
            break;
        }
        else if (ch == KEY_ESC || ch=='j' || ch=='p' || ch==KEY_F2)
        {
            return  - 1;
        }

    }
    return (iBase + iSelected);
}

//----------------------------------------------------------------
void PoliceSeekRichHouse()
{
    int iTempX, iTempY;
    int iMapX, iMapY;

    iMapX = map_x;
    iMapY = map_y;

    map_x = 0;
    map_y = 0;

    iTempY = man_y;
    man_y = 4;
    DrawMap();

    DisplayMessage(OBJ_POLICE, "Ææ¹Ö£¬¸ô±ÚÎÝ×ÓµÄ¾¯ÁåÔõÃ´»áÏì£¬ÎÒµÃ¹ýÈ¥²é²é¿´");

    MapData[2][1] = OBJ_DRHOUSE4;
    for (iTempX = 1; iTempX <= 5; iTempX = iTempX + 1)
    {
        DrawMap();
        DrawGraphic(iTempX, 3, OBJ_POLICE);
        Refresh();
        Delay(DELAY_TIME);
    }
    DrawMap();
    DrawGraphic(5, 2, OBJ_POLICE);
    Refresh();
    Delay(DELAY_TIME);
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    //Police go away
    g_iStory = 30;
    man_y = iTempY;
    map_x = iMapX;
    map_y = iMapY;
}

//----------------------------------------------------------------
void BadManGoAway()
{
    int iMapX, iMapY;

    iMapX = map_x;
    iMapY = map_y;
    map_x = 21;
    map_y = 25 - FIX_H;//fix
    MapData[27][24] = OBJ_BLANK;
    MapData[27][23] = OBJ_BADMANL;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    DisplayMessage(OBJ_BADMANR, "ß×£¬²ÞËùÔõÃ´Â©Ë®ÁË£¬¹ýÈ¥¿´¿´¡£");

    MapData[27][23] = OBJ_BLANK;
    MapData[26][23] = OBJ_BADMANL;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[26][23] = OBJ_BLANK;
    MapData[25][23] = OBJ_BADMANL;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[25][23] = OBJ_BLANK;
    MapData[22][26] = OBJ_BADMANL;
    map_x = iMapX;
    map_y = iMapY;
}

//----------------------------------------------------------------
void TheEnd()
{
    int x;
    set_room(1);
    ClearScreen();
    DisplayMessage(OBJ_BLANK, "-The End- ");
    DisplayMessage(OBJ_MAN, "µÈµÈ£¬µÈµÈ£¬ÔõÃ´ÕâÑù¾Í½áÊøÁË");
    DisplayMessage(OBJ_SAD, "Ã»°ì·¨ÒòÎª32K µÄ¿Õ¼äÒÑ¾­ÓÃÍêÁË");
    DisplayMessage(OBJ_MAN, "²»ÐÐ£¬ÎÒºÃ²»ÈÝÒ×²Å¾È³ö²©Ê¿£¬Ò²ÒªÓÐ¸ö¶¯»­»òÊ²Ã´µÄ");
    DisplayMessage(OBJ_SMILE, "ºÃ°É");

    ClearScreen();
    x = 1;
    DrawGraphic(x + 4, 1, OBJ_MAN);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_DR, "ÔãÁË£¬Ëû×·À´ÁË");

    ClearScreen();
    x++;
    DrawGraphic(x, 1, OBJ_BADMANR);
    DrawGraphic(x + 4, 1, OBJ_MAN2);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_BADMANR, "Õ¾×¡£¬±ðÅÜ");

    ClearScreen();
    x++;
    DrawGraphic(x, 1, OBJ_BADMANR);
    DrawGraphic(x + 4, 1, OBJ_MAN);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_MAN, "¾ÈÃü¡­¾ÈÃü¡­");

    ClearScreen();
    x++;
    DrawGraphic(x, 1, OBJ_BADMANR);
    DrawGraphic(x + 4, 1, OBJ_MAN2);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_BADMANR, "Õ¾×¡£¬±ðÅÜ");
    DisplayMessage(OBJ_MAN, "ÎØ¡«ÎÒ²»ÒªÕâÑùµÄ½á¾Ö¶¯»­");

    ClearScreen();
    DisplayMessage(OBJ_SMILE, "-The End-");
    exit(0);
}

//----------------------------------------------------------------
void Thing_GetObjectName(char cThingID, addr sName)
{
    if (cThingID == OBJ_SLINGSHOT)
    {
        strcpy(sName, "µ¯¹­      ");
    }
    else if (cThingID == OBJ_TICKET)
    {
        strcpy(sName, "½ÝÔË³µÆ±  ");
    }
    else if (cThingID == OBJ_INVOICE)
    {
        strcpy(sName, "ËÍÐÞµ¥¾Ý  ");
    }
    else if (cThingID == OBJ_CC800)
    {
        strcpy(sName, "CC800     ");
    }
    else if (cThingID == OBJ_TOILETPAPER)
    {
        strcpy(sName, "²ÞÖ½      ");
    }
    else
    {
        strcpy(sName, "Ï¸¾úÅàÑøÒº");
    }
}

//----------------------------------------------------------------
void Thing_Exchange(char cOldThingID, char cNewThingID)
{
    int i;

    for (i=0; i<max_ThingCount; i++)
    {
        if (mem_ThingBox[i] == cOldThingID)
        {
            mem_ThingBox[i] = cNewThingID;
            Thing_GetObjectName(cNewThingID, str_ThingBox[i]);
            break;
        }
    }
}

//----------------------------------------------------------------
int Thing_Add(char cThingID)
{
    int i;

    for (i = 0; i < max_ThingCount; i = i + 1)
    {
        if (mem_ThingBox[i] == cThingID)
        {
            return 0;
            //iResult=1;
            //break;
        }
    }
    //if (Thing_IsExist(cThingID))
    //{
    //    return 0;
    //}
    mem_ThingBox[max_ThingCount] = cThingID;
    Thing_GetObjectName(cThingID, str_ThingBox[max_ThingCount]);
    max_ThingCount++;
    return 1;
}

void BackupXY()
{
    rec_man_x = rec_x;
    rec_man_y = rec_y;
    rec_map_x = map_x;
    rec_map_y = map_y;
}

void RestoreXY()
{
    man_x = rec_man_x;
    man_y = rec_man_y;
    map_x = rec_map_x;
    map_y = rec_map_y;
}

//----------------------------------------------------------------
int CheckStatus()
{
    int x, y, iStatus;

    iStatus = 0;

    //È¡µÃÈËÎïµÄ¾ø¶Ô×ù±ê
    x = map_x + man_x;
    y = map_y + man_y;

    //×ß½ø½ÝÔËÕ¾
    if (x == 9 && y == 6)
    {
        BackupXY();
        map_x = 0;
        map_y = 15;
        man_x = 8;
        man_y = 1;
        set_room(1);
        iStatus = 1;
    }

    //Àë¿ª½ÝÔËÕ¾
    else if (x == 9 && y == 16)
    {
        map_x = 5;
        map_y = 5-FIX_H;
        man_x = 4;
        man_y = 2+FIX_H;
        set_room(0);
        //RestoreXY();
        iStatus = 1;
    }

    //×ß½øÑÐ¾¿ÊÒ
    else if (x == 17 && y == 6)
    {
        BackupXY();
        map_x = 0;
        map_y = 25-FIX_H;
        man_x = 5;
        man_y = 2+FIX_H;
        set_room(3);
        iStatus = 1;
    }

    //Àë¿ªÑÐ¾¿ÊÒ
    else if (x == 5 && y == 28)
    {
        //map_x = 13;
        //map_y = 5-FIX_H;
        //man_x = 4;
        //man_y = 2+FIX_H;
        RestoreXY();
        set_room(0);
        //g_iStory = 40;    //debug:²âÊÔ½á¾ÖÎïÆ·
        //Thing_Add(OBJ_CHEMICAL);  //debug:²âÊÔ½á¾Ö¾çÇé
        //ÒÑ¾­È¡µÃÅàÑøÒº
        if (g_iStory == 40)
        {
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);

            //±»×¥×ß
            DisplayMessage(OBJ_MAN, "ÄãÃÇÊÇË­£¬Òª×öÊ²Ã´");
            DisplayMessage(OBJ_BADMANR, "²»Òª¶¯£¬Äã¸ú²©Ê¿µÄ½»Çé²»´í°É£¬ÇëÄã¸úÎÒÃÇ×ß");
            //ÎÒÃÇÊÖÉÏÓÐÇ¹£¬
            DisplayMessage(OBJ_MAN, "Ê²Ã´£¬ÄãÃÇÊÇ°ó¼Ü²©Ê¿µÄÈË");
            DisplayMessage(OBJ_BADMANR, "·Ï»°ÉÙËµ£¬¿ì×ß");
            map_x = 21;
            map_y = 25-FIX_H;
            man_x = 5;
            man_y = 2+FIX_H;
            set_room(3);
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_BADMANR, "Ï£ÍûÄã¿ÉÒÔ°ïÎÒÃÇÈ°È°²©Ê¿£¬½ÐËû¸úÎÒÃÇºÏ×÷Ò»µã£¬·ñÔòÄãÃÇÓÀÔ¶×ß²»³öÕâÀï");
            DisplayMessage(OBJ_MAN, "Ô­À´²©Ê¿±»¹ØÔÚÕâÀï");
        }
        iStatus = 1;
    }

    //×ß½ø×Ô¼º¼Ò
    else if (x == 12 && y == 2)
    {
        BackupXY();
        map_x = 11;
        map_y = 16;
        man_x = 1;
        man_y = 2;
        set_room(1);
        iStatus = 1;
    }

    //Àë¿ª×Ô¼º¼Ò
    else if (x == 11 && y == 18)
    {
        //map_x = 4;
        //map_y = 0;
        //man_x = 7;
        //man_y = 2;
        RestoreXY();
        set_room(0);
        iStatus = 1;
    }

    //×ß½ø²©Ê¿µÄÎÝ×Ó
    else if (x == 1 && y == 2)
    {
        BackupXY();
        map_x = 11;
        map_y = 20;//fix
        man_x = 1; //fix
        man_y = 2; //fix
        set_room(1);
        iStatus = 1;
    }

    //×ß½øÔ¶¼û´óÂ¥
    else if (x == 26 && y == 8)
    {
        BackupXY();
        map_x = 11;
        map_y = 25;
        man_x = 8;
        man_y = 2;
        set_room(1);
        iStatus = 1;
    }

    //Àë¿ªÔ¶¼û´óÂ¥
    else if (x == 20 && y == 27)
    {
        //map_x = 20;
        //map_y = 7;
        //man_x = 6;
        //man_y = 2;
        RestoreXY();
        set_room(2);
        iStatus = 1;
    }

    //×ß½ø½ÝÔËÕ¾2
    else if (x == 22 && y == 2)
    {
        BackupXY();
        map_x = 0;
        map_y = 15;
        man_x = 1;
        man_y = 2;
        set_room(1);
        RapidBack();
        iStatus = 1;
    }

    //´Ó²©Ê¿ÎÝ×ÓµÄºóÃÅÀë¿ª
    else if (x == 20 && y == 23)
    {
        //ÒÑ¾­ÄÃµ½ËÍÐÞµ¥
        //if (Thing_IsExist(OBJ_CABINET_OPEN)) {
        if (MapData[20][19] == OBJ_CABINET_OPEN)
        {
            map_x = 0;
            map_y = 0;
            man_x = 4;
            man_y = 2;
            set_room(0);

            //¾¯²ì×ß»Ø²©Ê¿ÎÝ×ÓµÄÃÅ¿Ú
            MapData[2][1] = OBJ_POLICE;
            iStatus = 1;
        }

        //ÉÐÎ´ÄÃµ½ËÍÐÞµ¥£¬²»ÄÜÀë¿ª
        else
        {
            man_x--;
            DisplayMessage(OBJ_MAN, "ºÃ²»ÈÝÒ×²Å½øÀ´²©Ê¿µÄÎÝ×Ó£¬»¹Ã»ÕÒµ½ÖØÒªµÄ¶«Î÷Ç°£¬ÎÒÏë»¹ÊÇÏÈ²»ÒªÀë¿ªºÃÁË");
            iStatus = 1;
        }
    }

    //´Ó²©Ê¿ÎÝ×ÓµÄÇ°ÃÅÀë¿ª
    else if (x == 12 && y == 23)
    {
        man_y--;
        DisplayMessage(OBJ_MAN, "¾¯²ì¿ÉÄÜÒÑ¾­»ØÀ´ÁË£¬²»Òª´ÓÇ°ÃÅ×ß£¬ÃâµÃ±»·¢ÏÖ");
        iStatus = 1;
    }

    //×ß½ø½ÝÔË³µÏä
    else if (x == 0 && (y >= 16 && y <= 18))
    {
        RapidMove();
        map_x = 20;
        map_y = 1;
        man_x = 2;
        man_y = 2;
        set_room(2);
        DrawMap();
        DrawGraphic(man_x, man_y, OBJ_MAN);
        DisplayMessage(OBJ_MAN, "µ½´ïÏ«Ö¹ÁË");
        iStatus = 1;
    }

    //Í¨¹ý½ÝÔËÕ¢¿Ú
    else if (x == 4 && (y == 16 || y == 18))
    {
        MapData[y][x] = OBJ_DOORCLOSE;
        iStatus = 1;
    }

    //Àë¿ª²ÞËù
    else if (x == 27 && y == 23)
    {
        //Èç¹ûÒÑ¾­ÄÃµ½ÎÀÉúÖ½
        //if (Thing_IsExist(OBJ_TOILETPAPER)) {
        if (g_iStory == 50)
        {
            MapData[23][27] = OBJ_DOORCLOSE;
            iStatus = 1;
        }
    }

    //ÉÏ´²Ë¯¾õ
    else if (x == 19 && y == 17)
    {
        DrawGraphic(man_x, man_y, OBJ_SLEEP);

        //ÒÑ¾­ºÍ²©Ê¿Ì¸¹ý»°ÁË
        if (g_iStory == 10)
        {
            DisplayMessage(OBJ_SLEEP, "ºÃÏëË¯Å¶£¬ZZZ...");
            ClearScreen();
            DisplayMessage(OBJ_BLANK, "¸ôÌì... ");

            MapData[18][12] = OBJ_POLICE;
            map_x = 11;
            map_y = 16;
            man_x = 7;
            man_y = 1;
            set_room(1);
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "ÔõÃ´Ò»Ôç¾ÍÓÐ¾¯²ìÀ´¼ÒÀï£¬ÎÒµÃÈ¥¿´¿´²ÅÐÐ");
            g_iStory = 15;
            iStatus = 1;
        }
        else
        {
            DisplayMessage(OBJ_SLEEP, "ÎÒ»¹²»ÏëË¯¾õ£¬»¹ÊÇ³öÈ¥×ß×ß°É");
            man_x--;
            iStatus = 1;
        }
    }
    return iStatus;
}

//----------------------------------------------------------------
int IsWalkable()
{
    char ch;

    ch = MapData[map_y + man_y][map_x + man_x];

    if (ch == OBJ_BLANK || ch == OBJ_DOOROPEN || ch == OBJ_RAPID5 || ch == OBJ_GLOBALVIEW7
     || ch == OBJ_STAIR1 || ch == OBJ_STAIR2 || ch == OBJ_OFFICE4 || ch == OBJ_HOME3
     || ch == OBJ_BED || ch == OBJ_DRHOUSE4 || ch == OBJ_RAPIDCAR1 || ch == OBJ_RAPIDCAR2 || ch == OBJ_RAPIDCAR3
    )
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

void Talk()
{
    int x, y;

    x = man_x + map_x;
    y = man_y + map_y;

    //ÔÚ²©Ê¿ÎÝ×ÓµÄÃÅÍâ
    if ((x == 1 && y == 3))
    {
        if (g_iStory == 0)
        {
            DisplayMessage(OBJ_MAN, "²©Ê¿£¬ÕâÃ´Ò»¸öÈËÕ¾ÔÚÃÅ¿Ú·¢´ôÄØ");
            DisplayMessage(OBJ_DR,  "°¡£¬ÊÇÄãÑ½£¬ÎÒ×î½üÓÐÒ»ÏîÐÂÑÐ¾¿³É¹ûÒª·¢±í");
            DisplayMessage(OBJ_MAN, "ÄÇºÜºÃÑ½£¬ÎªÊ²Ã´Òª·³ÄÕÄØ");
            DisplayMessage(OBJ_DR,  "ÎÒµ£ÐÄ»áÓÐÈË»á½«ÎÒµÄ³É¹ûÓÃÔÚ²»·¨µÄÓÃÍ¾ÉÏ");
            DisplayMessage(OBJ_DR,  "¶øÇÒÎÒ×î½üÓÐ±»¸ú×ÙµÄ¸Ð¾õ£¬»¹»á½Óµ½²»Ã÷µÄµç»°");
            DisplayMessage(OBJ_MAN, "²»»á°É£¬²©Ê¿£¬Òª²»ÒªÍ¨Öª¾¯·½");
            DisplayMessage(OBJ_DR,  "²»ÐÐ£¬²»ÐÐ£¬Ëµ²»¶¨ÊÇÎÒÌ«Ãô¸ÐÁË£¬²»Òª¾ª¶¯´ó¼Ò");
            g_iStory = 10;
        }
        else if (g_iStory == 10)
        {
            DisplayMessage(OBJ_DR, "ºÜÍíÁË£¬¿ì»ØÈ¥Ë¯°É");
        }

        //Óë¾¯Ô±ÔÚ²©Ê¿ÎÝ×ÓÃÅÍâ½»Ì¸
        else
        {
            if (MapData[2][1] == OBJ_POLICE)
            {
                DisplayMessage(OBJ_MAN,     "¾¯²ìÏÈÉú£¬ÄãÎªÊ²Ã´Ò»Ö±ÊØÔÚ²©Ê¿µÄ¼ÒÃÅ¿Ú");
                DisplayMessage(OBJ_POLICE,  "ÒòÎª²©Ê¿¿ÉÄÜÊÇÔÚ¼ÒÖÐ±»°ó¼ÜµÄ£¬ÎÒÃÇÒª·âËøÏÖ³¡£¬×¼±¸½øÐÐµ÷²é");
                DisplayMessage(OBJ_MAN,     "Á¬ÎÒÒ²²»ÄÜ½øÈ¥Âð");
                DisplayMessage(OBJ_POLICE,  "µ±È»£¬ÎÒÃÇ²»ÄÜËæÒâÈÃÈËÆÆ»µÏÖ³¡");
                DisplayMessage(OBJ_MAN,     "£¨¿´À´ÎÒÒª½øÈ¥²©Ê¿µÄÎÝÀï£¬µÃÏÈÏë°ì·¨Òý¿ªÕâ¸ö¾¯²ì²ÅÐÐ£©");
            }
        }
    }

    //ÔÚ¼ÒÖÐ
    else if (x == 13 && y == 18)
    {

        //Óë¾¯Ô±ÔÚ¼ÒÖÐ½»Ì¸
        if (g_iStory == 15)
        {
            DisplayMessage(OBJ_POLICE, "ÄãºÃ£¬ÎÒÊÇ¾¯²ì£¬ÄãµÄÁÚ¾Ó²©Ê¿Ê§×ÙÁË£¬Ëû×òÍí¿ÉÄÜÔâÈË°ó¼Ü");
            DisplayMessage(OBJ_MAN,    "°ó¼Ü! ÔõÃ´»áÄØ? ");
            DisplayMessage(OBJ_POLICE, "ËûµÄÎÝ×ÓÃÅËøÓÐ±»ÆÆ»µµÄºÛ¼££¬ÎÝÀïÒ²ÓÐ±»ÆÆ»µ£¬½ñÔçÓÐÈË·¢ÏÖ²ÅÀ´±¨°¸µÄ");
            DisplayMessage(OBJ_POLICE, "²©Ê¿ÓÐºÍÈË½áÔ¹Âð? »ò×î½üÓÐ·¢Éú¹ýÊ²Ã´ÊÂÂð? ");
            DisplayMessage(OBJ_MAN,    "¡­¡­");
            DisplayMessage(OBJ_MAN,    "Ã»ÓÐ");
            DisplayMessage(OBJ_POLICE, "ÄÇ×òÍíÄãÓÐÌýµ½Ê²Ã´ÉùÒô£¬»ò¿´µ½Ê²Ã´¿ÉÒÉµÄÈËÄØ");
            DisplayMessage(OBJ_MAN,    "Ã»ÓÐ£¬×òÍíÎÒË¯µÃºÜºÃ");
            DisplayMessage(OBJ_POLICE, "ÄãÈç¹ûÓÐÏëÆðÊ²Ã´ÏßË÷µÄ»°£¬ÇëÄãÔÙ¸æËß¾¯·½");
            DisplayMessage(OBJ_MAN,    "ºÃµÄ¡£");
            g_iStory = 20;

            //¾¯Ô±Àë¿ª
            MapData[18][12] = OBJ_BLANK;
            MapData[18][11] = OBJ_POLICE;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);

            //delay(DELAY_TIME);
            MapData[18][11] = OBJ_BLANK;

            //¾¯Ô±Õ¾ÔÚ²©Ê¿ÎÝ×ÓÃÅÍâ
            MapData[2][1] = OBJ_POLICE;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "²©Ê¿µÄÊ§×ÙÒ»¶¨ºÍ×òÌìËûÌáµ½µÄÑÐ¾¿ÓÐ¹Ø£¬");
            DisplayMessage(OBJ_MAN, "¾ª¶¯¾¯·½¿ÉÄÜ¶Ô²©Ê¿²»Àû£¬ÎÒµÃ×Ô¼º¾ÈËû³öÀ´¡£");
            DisplayMessage(OBJ_MAN, "ÏÈÈ¥²©Ê¿µÄÑÐ¾¿ÊÒ¿´¿´ºÃÁË¡£");
        }
        else
        {
            DisplayMessage(OBJ_MAN, "Ã»ÓÐ¿É½»Ì¸µÄÈË");
        }
    }

    //ÔÚÔ¶¼û´óÂ¥£¬¹þµç±¦±¦ÃæÇ°
    else if (x == 15 && y == 28)
    {
        DisplayMessage(OBJ_GIRL, "ÄãºÃ£¬ÎÒÊÇ¹þµç±¦±¦£¬ÓÐÊ²Ã´ÊÂÂð");
        DisplayMessage(OBJ_MAN,  "°¡£¬Äã¾ÍÊÇ¹þµç±¦±¦Ñ½£¬ÎÒÏëÎÊ¡­");
        DisplayMessage(OBJ_MAN,  "ÍíÉÏÓÐÃ»ÓÐ¿Õ£¬ÎÒÃÇÒ»Æð³Ô·¹°É");
        DisplayMessage(OBJ_GIRL, "Ê²Ã´? ÄãÊÇÎªÕâ¸ö¶øÀ´µÄÂð? ");
        DisplayMessage(OBJ_MAN,  "°¡£¬²»ÊÇÀ²£¬ÎÒÊÇÏëÄÃ»ØËÍÐÞµÄcc800 ");
        DisplayMessage(OBJ_GIRL, "°ÑËÍÐÞµÄµ¥¾Ý¸øÎÒ¾Í¿ÉÒÔÁË");
    }

    //ÔÚÑÐ¾¿ÊÒºÍ²©Ê¿ÖúÀí½»Ì¸
    else if ((x == 7 && y == 21) || (x == 8 && y == 22))
    {
        if (g_iStory >= 20)
        {
            DisplayMessage(OBJ_ASSISTANT, "ÌýËµ²©Ê¿±»°ó¼ÜÁË£¬ÎÒºÃµ£ÐÄ");
            DisplayMessage(OBJ_MAN,       "±ðµ£ÐÄ£¬ÎÒÃÇÕýÔÚÏë°ì·¨¾ÈËû³öÀ´");
            DisplayMessage(OBJ_MAN,       "ÄãÊÇ²©Ê¿µÄÖúÀí£¬ÄãÖªµÀ²©Ê¿×î½üÓÐÊ²Ã´ÑÐ¾¿Âð");
            DisplayMessage(OBJ_ASSISTANT, "ÎÒ²»Çå³þ£¬²©Ê¿×î½ü¶¼×Ô¼º¹ØÆðÀ´ÑÐ¾¿£¬Ö»ÖªµÀºÃÏñ¸úÏ¸¾úÓÐ¹Ø");
            DisplayMessage(OBJ_MAN,       "Ï¸¾ú? ÄÇÃ´ÄãÖªµÀ²©Ê¿ÓÐ¼ÇÂ¼ÊÂÇéµÄÏ°¹ßÂð? ");
            DisplayMessage(OBJ_ASSISTANT, "ËûÓÐÒ»Ì¨cc800 £¬Ëû¶¼°ÑÊÂÇé¼ÇÂ¼ÔÚÀïÃæ£¬²»¹ýÇ°Ò»Õó×ÓÓÐÎÊÌâ£¬ÄÃÈ¥ËÍÐÞÁË");
            DisplayMessage(OBJ_MAN,       "£¨¿´À´ÎÒµÃÕÒ³öÕâÌ¨cc800 ²ÅÐÐ£©");
        }
        else
        {
            DisplayMessage(OBJ_ASSISTANT, "ÄãºÃ£¬ÎÒÊÇ²©Ê¿µÄÖúÀí");
            DisplayMessage(OBJ_MAN,       "ÄãºÃ");
        }
    }

    //ÔÚ¼àÀÎÖÐºÍ²©Ê¿½»Ì¸
    else if ((x == 28 && y == 28) || (x == 29 && y == 27))
    {

        //¸Õ±»Çô½ûÊ±
        if (g_iStory == 40)
        {
            DisplayMessage(OBJ_MAN, "²©Ê¿£¬Äã²»Òª½ô°É£¬µ½µ×·¢ÉúÊ²Ã´ÊÂÁË");
            DisplayMessage(OBJ_DR,  "ËûÃÇÒªÎÒÌá¹©ÎÒ×î½üÑÐ¾¿³É¹¦µÄÏ¸¾úºÏ³É·½³ÌÊ½")
                           ;
            DisplayMessage(OBJ_MAN, "Ï¸¾úºÏ³É·½³ÌÊ½£¿");
            DisplayMessage(OBJ_DR,  "Ã»´í£¬ÊÇÒ»ÖÖ¾ßÓÐÇ¿Á¦¸¯Ê´ÐÔÖÊµÄÏ¸¾ú");
            DisplayMessage(OBJ_MAN, "Ç¿Á¦¸¯Ê´£¿²»»áÊÇ´ÓÄã¹ñ×ÓÀïÄÃÀ´µÄÕâ¸ö°É");
            DisplayMessage(OBJ_DR,  "Ã»´í£¬ÄãÔõÃ´ÄÃµ½µÄ");
            DisplayMessage(OBJ_MAN, "ÔãÁË£¬ÎÒ¸Õ²ÅÓÐÕ´µ½Ò»µãÔÚÉíÉÏ£¬ÎÒ²»»á±»¸¯Ê´µô°É");
            DisplayMessage(OBJ_DR,  "·ÅÐÄºÃÁË£¬ÕâÖÖÏ¸¾úÀë¿ªÅàÑøÒººó£¬ºÜ¿ì¾Í»áËÀÍöÁË");
            DisplayMessage(OBJ_DR,  "¶øÇÒÒªÔÚÓÐµçÁ÷Í¨¹ýµÄÊ±ºò£¬²Å»á¿ªÊ¼ÓÐ¸¯Ê´µÄÐ§¹û£¬·ñÔòÔõÄÜÓÃÆ¿×Ó×°×ÅËü");
            DisplayMessage(OBJ_MAN, "ËµµÃÒ²ÊÇ£¬ÄÇ¾ÍºÃÁË");
            DisplayMessage(OBJ_DR,  "±ð¶àËµÁË£¬¸Ï¿ìÏë·¨×ÓÌÓ³öÕâÀï²ÅÊÇ");
        }

        //Èû×¡ÂíÍ°Ö®ºó
        else if (g_iStory == 50)
        {
            DisplayMessage(OBJ_MAN, "ÎÒ°Ñ²ÞËùµÄÂíÍ°¶Â×¡ÁË£¬µÈÒ»ÏÂÂ©Ë®Ó¦¸Ã»áÒý¿ªÊØÎÀµÄ");
            DisplayMessage(OBJ_DR,  "Ï£Íû¿ÉÒÔ³É¹¦");
            BadManGoAway();
            g_iStory = 60;
        }

        //ÊØÎÀÀë¿ªÖ®ºó
        else if (g_iStory == 60 || g_iStory == 70)
        {
            DisplayMessage(OBJ_MAN, "³É¹¦ÁË£¬ÊØÎÀ×ß¿ªÁË");
            DisplayMessage(OBJ_DR,  "ÎÒÃÇ¸Ï¿ìÏë°ì·¨Àë¿ª");
        }
        else
        {
            DisplayMessage(OBJ_MAN, "...");
            DisplayMessage(OBJ_DR, "...");
        }
    }

    //ÔÚ¼àÀÎÖ®ÖÐºÍÊØÎÀÌ¸»°
    else if (x == 26 && y == 27)
    {
        if (MapData[y][x - 2] == OBJ_BADMANR)
        {
            DisplayMessage(OBJ_MAN,     "¿ì·ÅÎÒÃÇ³öÈ¥");
            DisplayMessage(OBJ_BADMANR, "ÔÚ²©Ê¿´ðÓ¦ºÍÎÒÃÇºÏ×÷Ö®Ç°£¬ÐÝÏëÀë¿ªÕâÀï");
        }
    }
    else
    {
        DisplayMessage(OBJ_MAN, "Ã»ÓÐ¿É½»Ì¸µÄÈË");
    }
}

//----------------------------------------------------------------
void Search()
{
    int x, y;

    x = map_x + man_x;
    y = map_y + man_y;

    //ÔÚºÀÕ¬Ö®Ç°
    if (((x == 5 || x == 6 || x == 7) && (y == 3)) || (x == 8 && y == 2))
    {

        DisplayMessage(OBJ_MAN, "ÕâÊÇ²©Ê¿¼ÒÅÔ±ßµÄºÀÕ¬£¬ºÜÉÙ¿´¼ûÓÐÈË½ø³ö£¬²»¹ý±£È«ÏµÍ³ºÜÑÏÃÜ£¬ÉÏ´ÎÓÐÖ»Ð¡Äñ×²µ½´°»§£¬»¹ÒýÆð¾¯Áå´óÏì£¬¾ª¶¯ÁË²»ÉÙÈË¡£");
        return ;
    }

    //ÔÚ²©Ê¿µÄÎÝ×ÓÖ®Ç°
    else if ((x == 1 || x == 2 || x == 3) && (y == 3))
    {
        DisplayMessage(OBJ_MAN, "²©Ê¿×¡ÔÚÕâÎÝ×ÓºÃ¼¸ÄêÁË£¬ÎÒ»¹Âù³£À´´®ÃÅ×ÓµÄ£¬ËûÊÇÒ»¸öºÍÉÆµÄÁÚ¾Ó¡£");
        return ;
    }

    //ÔÚ¼ÒÀïµÄ¹ñ×ÓÇ°
    else if (x == 18 && y == 17)
    {
        if (Thing_Add(OBJ_SLINGSHOT))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN,       "¹ñ×ÓÀïÓÐÒ»¸öµ¯¹­£¬Õâ¸öµ¯¹­ÊÇÎÒÒÔÇ°Ð¡Ê±ºòµÄÍæ¾ß£¬ÒÔÇ°ÎÒ¿ÉÊÇ°Ù·¢°ÙÖÐµÄÉñÉäÊÖ");
            DisplayMessage(OBJ_SLINGSHOT, "µÃµ½ÁËµ¯¹­");
            return ;
        }
    }

    //ÔÚ×Ô¶¯ÊÛÆ±»úÇ°
    else if (x == 7 && y == 16)
    {
        DisplayMessage(OBJ_MAN, "ÕâÀïÓÐÒ»Ì¨×Ô¶¯ÊÛÆ±»ú");
        return ;
    }

    //ÔÚ½ÝÔËÕ¢¿Ú
    else if (x == 5 && (y == 16 || y == 18))
    {
        DisplayMessage(OBJ_MAN, "¸ÕºÃÓÐÒ»°à³µ£¬²»¹ýÎÒÐèÒª³µÆ±²ÅÄÜ¹ýÈ¥´î³µ");
        return ;
    }

    //²©Ê¿ÎÝ×ÓÖÐµÄ¹ñ×Ó
    else if (x == 19 && y == 21)
    {
        if (Thing_Add(OBJ_INVOICE))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN,     "ÕÒµ½ÁË£¬ÕâÀïÓÐÒ»ÕÅcc800 µÄËÍÐÞµ¥¾Ý£¬½ñÌì¸ÕºÃ¿ÉÒÔÈ¥ÄÃ»ØÀ´£¬µØµãÔÚÏ«Ö¹£¬¿´À´ÎÒµÃ¸Ï¿ì´î½ÝÔË¹ýÈ¥²ÅÐÐ");
            DisplayMessage(OBJ_INVOICE, "µÃµ½ÁËËÍÐÞµ¥");
            return ;
        }
    }

    //ÑÐ¾¿ÊÒÖÐµÄ¹ñ×Ó
    else if (x == 1 && y == 21)
    {
        DisplayMessage(OBJ_MAN, "Õâ¸ö¹ñ×Ó±»Ò»¸öÊý×ÖËøËø×¡ÁË£¬²©Ê¿ÊÇÒ»¸ö½¡ÍüµÄÈË£¬ËûÓ¦¸Ã»á°ÑºÅÂë¼ÇÔÚÄ³¸öµØ·½");
        return ;
    }

    //ÔÚ²ÞËùÖÐµÄ¹ñ×Ó
    else if (x == 26 && y == 22)
    {

        //µÃµ½²ÞÖ½
        if (Thing_Add(OBJ_TOILETPAPER))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN,         "ÕÒµ½Ò»´ó°ü²ÞÖ½£¬²»ÅÂÀ­¶Ç×ÓÁË");
            DisplayMessage(OBJ_TOILETPAPER, "µÃµ½ÁË²ÞÖ½");
            return ;
        }
    }

    //¼àÀÎÖÐµÄÃÅ
    else if (x == 29 && y == 27)
    {
        DisplayMessage(OBJ_MAN, "ÕâÀïÓÐ¸öÃÅºÃÏñ¿ÉÒÔÍ¨µ½ÍâÃæ£¬²»¹ýËøµÃºÜ½ô´ò²»¿ª");
        return ;
    }
    DisplayMessage(OBJ_MAN, "Ã»ÓÐ¼ì²éµ½Ê²Ã´");
}

//----------------------------------------------------------------
void UseThing()
{
    int iSelectID;
    char cThingID;
    int x, y;

    x = man_x + map_x;
    y = man_y + map_y;

    iSelectID = DisplayMenu(str_ThingBox, mem_ThingBox, max_ThingCount);
    if (iSelectID ==  - 1)
    {
        return ;
    }
    DrawMap();
    DrawGraphic(man_x, man_y, OBJ_MAN);
    cThingID = mem_ThingBox[iSelectID];
    if (cThingID == OBJ_SLINGSHOT)
    {
        if (x == 8 && y == 2 && g_iStory == 20)
        {
            DisplayMessage(OBJ_MAN, "¿´ÎÒµÄ");
            DisplayMessage(OBJ_MAN, "Å¾£¬¸ÕºÃ´òÖÐ´°»§£¬¿´À´ÎÒ»¹ÊÇÏàµ±Éñ×¼µÄ");
            DisplayMessage(OBJ_MAN, "Áå~~¾¯Áå¿ªÊ¼ÏìÁË");
            PoliceSeekRichHouse();
        }
        else if ((x == 5 || x == 6 || x == 7) && (y == 3) && g_iStory == 20)
        {
            DisplayMessage(OBJ_MAN, "ÔÚÕâÀïÌ«Ã÷ÏÔ£¬»á±»¿´µ½µÄ");
        }
        else
        {
            DisplayMessage(OBJ_MAN, "ÎÒ¿É²»ÏëÈÇÉÏÊ²Ã´Âé·³");
        }
    }

    //Âò³µÆ±
    else if (x == 7 && y == 16 && cThingID == OBJ_MONEY)
    {
        Thing_Exchange(OBJ_MONEY, OBJ_TICKET);
        DisplayMessage(OBJ_TICKET, "µÃµ½ÁË³µÆ±");
    }

    //Í¨¹ý½ÝÔËÕ¢¿Ú
    else if ((x == 3 || x == 5) && (y == 16 || y == 18) && cThingID==OBJ_TICKET)
    {
        MapData[y][4] = OBJ_DOOROPEN;
    }

    //È¡µÃ cc800
    else if (x == 15 && y == 28 && cThingID == OBJ_INVOICE)
    {
        Thing_Exchange(OBJ_INVOICE, OBJ_CC800);
        DisplayMessage(OBJ_MAN,  "ÕâÊÇÎÒµÄcc800 ËÍÐÞµÄµ¥¾Ý");
        DisplayMessage(OBJ_GIRL, "ºÃ£¬ÇëµÈÒ»ÏÂ");
        DisplayMessage(OBJ_GIRL, "ÕâÊÇÐÞºÃµÄcc800 £¬ÒªºÃºÃ±£¹ÜÅ¶");
        DisplayMessage(OBJ_MAN,  "ºÃµÄ£¬ÎÒÒ»¶¨»áµÄ");
        DisplayMessage(OBJ_MAN,  "£¨ÀïÃæÓÐ²©Ê¿ÊµÑéÊÒÀï¹ñ×ÓµÄÊý×ÖËøÃÜÂë£¬ÎÒ¿ÉÒÔÓÃÕâ¸öÈ¥´ò¿ªËûµÄ¹ñ×ÓÁË£©");
        DisplayMessage(OBJ_CC800,"µÃµ½ÁË cc800");
    }

    //È¡µÃÅàÑøÒº
    else if (x == 1 && y == 21 && cThingID == OBJ_CC800)
    {
        if (Thing_Add(OBJ_CHEMICAL))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "ÔÚ²©Ê¿µÄ¹ñ×ÓÀï£¬ÕÒµ½ÁËÒ»¹ÞÆæ¹ÖµÄÒ©Ë®£¬²»ÖªÓÐÊ²Ã´ÓÃÍ¾¡£");
            DisplayMessage(OBJ_MAN, "¿ÉÄÜºÍËû×î½üµÄÑÐ¾¿ÓÐ¹Ø£¬Ï£Íû¿ÉÒÔÕÒ³öÒ»Ð©ÓÐ¹ØËû±»°ó¼ÜµÄÏßË÷¡£");
            DisplayMessage(OBJ_CHEMICAL, "µÃµ½ÁËÅàÑøÒº");
            g_iStory = 40;
            MapData[7][16] = OBJ_BADMANR;
            MapData[7][18] = OBJ_BADMANL;
        }
    }

    //Èû×¡ÂíÍ°
    else if (((x == 26 && y == 22) || (x == 25 && y == 23)) && cThingID == OBJ_TOILETPAPER)
    {
        DisplayMessage(OBJ_MAN, "ÕâÑù°ÑÂíÍ°¶Â×¡£¬µÈÒ»ÏÂ¾Í»áÒç³öºÜ¶àË®À´ÒýÆð×¢ÒâÁË");
        MapData[23][25] = OBJ_WATER;
        g_iStory = 50;
    }

    //Ê¹ÓÃÏ¸¾úÅàÑøÒººÍÊÖ»úÌÓ³ö¼àÀÎ
    else if (x == 29 && y == 27)
    {
        if (g_iStory == 60 && cThingID == OBJ_CHEMICAL)
        {
            DisplayMessage(OBJ_MAN, "ÎÒ°ÑÒ©Ë®Í¿ÔÚÃÅÉÏÁË£¬½ÓÏÂÀ´µÈÍ¨ÉÏµç¾Í¿ÉÒÔÁË");
            g_iStory = 70;
        }
        else if (g_iStory == 70 && cThingID == OBJ_CELLPHONE)
        {
            DisplayMessage(OBJ_MAN, "»¹ºÃÐÐ¶¯µç»°µÄµç³Ø»¹ÓÐµç£¬°ÑÏßÂ·¸ÄÒ»ÏÂ£¬¾Í¿ÉÒÔ·Å³öµçÁË");
            MapData[27][30] = OBJ_BLANK;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "ÍÛ£¬ÃÅÒ»ÏÂ×Ó¾ÍÈÜµôÁË£¬Ì«¿ÉÅÂÁË");
            DisplayMessage(OBJ_DR,  "ÎÒÃÇ¿ìÌÓ×ß°É");
            g_iStory = 80;

            //The End
            TheEnd();
        }

        else if (g_iStory < 60)
        {
            DisplayMessage(OBJ_MAN, "Ã»ÓÐ×÷ÓÃ");
        }

        else
        {
            DisplayMessage(OBJ_MAN, "ÓÐÈË»¹ÔÚÃÅ¿Ú¼àÊÓ£¬Ì«Î£ÏÕÁË»á±»·¢ÏÖµÄ£¬ÎÒµÃÒý¿ªËû²ÅÐÐ");
        }
    }

    //Ê¹ÓÃÐÐ¶¯µç»°
    else if (cThingID == OBJ_CELLPHONE)
    {
        DisplayMessage(OBJ_MAN, "à½à½¡­ÊÕ²»µ½Ñ¶ºÅ£¬Õâ¸öÐÐ¶¯µç»°Õæ²î£¬×ÜÊÇÊÕ²»µ½Ñ¶ºÅ£¬´ò²»³öÈ¥");
    }

    //»ßÂ¸¾¯Ô±
    else if ((x == 1 && y == 3) && cThingID==OBJ_MONEY && MapData[2][1]==OBJ_POLICE)
    {
        DisplayMessage(OBJ_POLICE, "Äã¸Ò»ßÂ¸¾¯Ô±£¬Õâ¿ÉÊÇÖØ×ï");
        DisplayMessage(OBJ_MAN,    "²»¸Ò£¬²»¸Ò");
    }

    else
    {
        DisplayMessage(OBJ_MAN, "Ã»ÓÐ×÷ÓÃ");
    }
}

//----------------------------------------------------------------
char KeyPause(int delaytime)
{
    char key;
    if (delaytime != 0)
    {
        Delay(delaytime);
    }
    key = CheckKey(128);
    if (key == 0)
    {
        while(Inkey() != 0);
        key = getchar();
    }
    return key;//ConvertKey(key);
}

void main()
{
    int x, y;
    int tx, ty;
    int ch;
    int iDrawTimes;
    int iSelectID;
    ReleaseKey(128);
    // ¼æÈÝ´¦Àí
    check_WIDTH_HEIGHT();
    LCD_MAX_WIDTH_OBJ = _WIDTH / OBJECT_WIDTH_DOT;
    LCD_MAX_HEIGHT_OBJ = (_HEIGHT + 10) / OBJECT_HEIGHT_DOT;
    LCD_HEIGHT_START = 0;
    LCD_HEIGHT_END = LCD_MAX_HEIGHT_OBJ - 1;//debug
    LCD_WIDTH_START = 0;
    LCD_WIDTH_END = LCD_MAX_WIDTH_OBJ - 1;
    FIX_H = (_HEIGHT - (80 - 10)) / OBJECT_HEIGHT_DOT;
    //
    if (_WIDTH >= 26 * 8)
    {
        TEXT_FONT = FONT_L;
        FONT_W = 8;
        FONT_H = 17;
    }
    else
    {
        TEXT_FONT = FONT_S;
        FONT_W = 6;
        FONT_H = 13;
    }
    //
    memcpy(MapData, MapBackup, sizeof(MapData));
    //
    set_room(0);
    g_iStory = 0;
    cnt_MenuItem = 3;

    //  InitialThingBox();
    max_ThingCount = 2;
    mem_ThingBox[0] = OBJ_MONEY;
    mem_ThingBox[1] = OBJ_CELLPHONE;
    strcpy(str_ThingBox[0], "Ç®        ");
    strcpy(str_ThingBox[1], "ÐÐ¶¯µç»°  ");

    man_x = 7;
    man_y = 2;
    map_x = 4;
    map_y = 0;

    iDrawTimes = 0;
    DrawMap();
    DrawGraphic(man_x, man_y, OBJ_MAN);
    Refresh();
    ch = KEY_HELP;
    for (;;ch=KeyPause(200))
    {
        rec_x = man_x;
        rec_y = man_y;
        //
        if (ch == KEY_LEFT || ch=='a')
        {
            if (man_x > LCD_WIDTH_START)
            {
                man_x--;
                if (IsWalkable())
                {
                    if (man_x == LCD_WIDTH_START)
                    {
                        if (map_x > 0)
                        {
                            map_x--;
                            man_x++;
                        }
                    }
                }
                else
                {
                    man_x++;
                }
            }
        }
        else if (ch == KEY_RIGHT || ch=='d')
        {
            if (man_x < LCD_WIDTH_END)
            {
                man_x++;
                if (IsWalkable())
                {
                    if (man_x == LCD_WIDTH_END)
                    {
                        if (map_x < MAP_MAX_WIDTH_OBJ - LCD_MAX_WIDTH_OBJ)
                        {
                            map_x++;
                            man_x--;
                        }
                    }
                }
                else
                {
                    man_x--;
                }
            }
        }
        else if (ch == KEY_UP || ch=='w')
        {
            if (man_y > LCD_HEIGHT_START)
            {
                man_y--;
                if (IsWalkable())
                {
                    if (man_y == LCD_HEIGHT_START)
                    {
                        if (map_y > 0)
                        {
                            map_y--;
                            man_y++;
                        }
                    }
                }
                else
                {
                    man_y++;
                }

            }
        }
        else if (ch == KEY_DOWN || ch=='s')
        {
            if (man_y < max_height_obj - 1)
            {
                man_y++;
                if (IsWalkable())
                {
                    if (man_y == max_height_obj - 1)
                    {
                        if (map_y < MAP_MAX_HEIGHT_OBJ - max_height_obj)
                        {
                            map_y++;
                            man_y--;
                        }
                    }
                }
                else
                {
                    man_y--;
                }
            }
        }
        else if (ch == KEY_ENTER || ch=='k'|| ch=='.' || ch==KEY_F1)
        {
            iSelectID = DisplayMenu(str_MenuItem, NULL, cnt_MenuItem);
            if (iSelectID == TALK)
            {
                DrawMap();
                DrawGraphic(man_x, man_y, OBJ_MAN);
                Talk();
            }
            else if (iSelectID == SEARCH)
            {
                DrawMap();
                DrawGraphic(man_x, man_y, OBJ_MAN);
                Search();
            }
            else if (iSelectID == USE)
            {
                DrawMap();
                DrawGraphic(man_x, man_y, OBJ_MAN);
                UseThing();
            }
        }
        else if (ch == KEY_HELP)
        {
            tx = (_WIDTH - FONT_W * 26) / 2;
            ty = (_HEIGHT - FONT_H * 6) / 2;
            ClearScreen();
            TextOut(tx, ty + FONT_H * 0, "ÓÎÏ·ÖÐ°´ÏÂEnter »á³öÏÖ¡®½»", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 1, "Ì¸¡¯¡¢¡®²é¿´¡¯¡¢¡®Ê¹ÓÃÎïÆ·", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 2, "¡¯µÄÑ¡Ïî£¬ÓÎÏ·²¢²»ÄÑ£¬ºÍÓö", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 3, "¼ûµÄÈË½»Ì¸£¬¶à²é¿´ËÄÖÜ»·¾³", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 4, "Ó¦¸Ã¾Í¿ÉÒÔË³ÀûµÄ½øÐÐÓÎÏ·¡£", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 5, "ÒÆÖ²:Ê«Åµ±È   Ô­×÷:Nothing", TEXT_FONT);
            Refresh();
            getchar();
        }
        else if (ch==KEY_ESC)
        {
            break;
        }

        DrawMap();

        x = map_x + man_x;
        y = map_y + man_y;

        if (iDrawTimes % 2)
        {
            DrawGraphic(man_x, man_y, OBJ_MAN);
        }
        else
        {
            DrawGraphic(man_x, man_y, OBJ_MAN2);
        }
        Refresh();

        if (CheckStatus())
        {
            iDrawTimes = 0;
            Delay(100);
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            Refresh();
        }
        iDrawTimes++;
    }
}

//----------------------------------------------------------------

