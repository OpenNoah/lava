#ifndef NULL
    #define USE_C_COMPILER
    #include "lava.h"
#else
    #define LCD_W   160
    #define LCD_H   80
    #width  LCD_W
    #height LCD_H
#endif
//#bigram
//#color  8

#define FONT_S      0x00
#define FONT_L      0x80
int TEXT_FONT;
int FONT_W;
int FONT_H;

#define WB_COPY 1
#define WB_NOT  2
#define WB_OR   3
#define WB_AND  4
#define WB_XOR  5

#define KEY_UP      20
#define KEY_DOWN    21
#define KEY_RIGHT   22
#define KEY_LEFT    23
#define KEY_F1      28
#define KEY_F2      29
#define KEY_ENTER   13
#define KEY_SPACE   20
#define KEY_HELP    25
#define KEY_ESC     27

//----------------------------------------------------------------
#define OBJECT_WIDTH_DOT    16
#define OBJECT_HEIGHT_DOT   20
#define Y_OFFSET            400         //20*20 LCD_WIDTH_BYTE*OBJECT_HEIGHT_DOT
#define OBJECT_DATA_SIZE    40          //2*20 OBJECT_WIDTH_BYTE*OBJECT_HEIGHT_DOT
//----------------------------------------------------------------
int LCD_MAX_WIDTH_OBJ;      // (_WIDTH/OBJECT_WIDTH_DOT)
int LCD_MAX_HEIGHT_OBJ;     // ((_HEIGHT+10)/OBJECT_HEIGHT_DOT)//debug
int LCD_HEIGHT_START;       // 0
int LCD_HEIGHT_END;         // (LCD_MAX_HEIGHT_OBJ-1)//debug
int LCD_WIDTH_START;        // 0
int LCD_WIDTH_END;          // (LCD_MAX_WIDTH_OBJ-1)
int FIX_H;                  // ((_HEIGHT-80+10)/OBJECT_HEIGHT_DOT)

#define OBJ_BLANK       0
#define OBJ_TREE        1
#define OBJ_BRICK       2
#define OBJ_GRAY        3
#define OBJ_MAN         4
#define OBJ_MAN2        5
#define OBJ_GLOBALVIEW1 6
#define OBJ_GLOBALVIEW2 7
#define OBJ_GLOBALVIEW3 8
#define OBJ_GLOBALVIEW4 9
#define OBJ_GLOBALVIEW5 10
#define OBJ_GLOBALVIEW6 11
#define OBJ_GLOBALVIEW7 12
#define OBJ_GLOBALVIEW8 13
#define OBJ_DR          14
#define OBJ_DRHOUSE1    15
#define OBJ_DRHOUSE2    16
#define OBJ_DRHOUSE3    17
#define OBJ_DRHOUSE4    18
#define OBJ_DRHOUSE5    19
#define OBJ_DRHOUSE6    20
#define OBJ_SLEEP       21
#define OBJ_OFFICE1     22
#define OBJ_OFFICE2     23
#define OBJ_SMILE       24
#define OBJ_OFFICE3     25
#define OBJ_OFFICE4     26
#define OBJ_OFFICE5     27
#define OBJ_OFFICE6     28
#define OBJ_CHEMICAL    29
#define OBJ_RICHHOUSE1  30
#define OBJ_RICHHOUSE2  31
#define OBJ_RICHHOUSE3  32
#define OBJ_RICHHOUSE4  33
#define OBJ_RICHHOUSE5  34
#define OBJ_RICHHOUSE6  35
#define OBJ_RICHHOUSE7  36
#define OBJ_RICHHOUSE8  37
#define OBJ_RICHHOUSE9  38
#define OBJ_RAPID1      40
#define OBJ_RAPID2      41
#define OBJ_RAPID3      42
#define OBJ_RAPID4      43
#define OBJ_RAPID5      44
#define OBJ_RAPID6      45
#define OBJ_DOORCLOSE   46
#define OBJ_DOOROPEN    47
#define OBJ_STAIR1      48
#define OBJ_STAIR2      49
#define OBJ_FLOWER      50
#define OBJ_HOME1       51
#define OBJ_HOME2       52
#define OBJ_HOME3       53
#define OBJ_HOME4       54
#define OBJ_TABLE       55
#define OBJ_CABINET     56
#define OBJ_GIRL        57
#define OBJ_BED         58
#define OBJ_POLICE      59
#define OBJ_SLINGSHOT   60
#define OBJ_TICKETMACHINE   61
#define OBJ_MONEY       62
#define OBJ_TICKET      63
#define OBJ_CELLPHONE   64
#define OBJ_STREETLAMP  65
#define OBJ_INVOICE     66
#define OBJ_COMPUTER    67
#define OBJ_CC800       68
#define OBJ_WATER       69
#define OBJ_CABINET_OPEN    70
#define OBJ_BADMANL     71
#define OBJ_BADMANR     72
#define OBJ_RAPIDCAR1   73
#define OBJ_RAPIDCAR2   74
#define OBJ_RAPIDCAR3   75
#define OBJ_TRACK       76
#define OBJ_CLOSESTOOL  77
#define OBJ_TOILETPAPER 78
#define OBJ_SAD         79
#define OBJ_ASSISTANT   80

//----------------------------------------------------------------
//#define LEFT_ARROW      23
//#define RIGHT_ARROW  22
//#define UP_ARROW     20
//#define DOWN_ARROW   21
//#define KEY_ENTER     13
//#define KEY_ESC       27
//#define KEY_HELP      25
//----------------------------------------------------------------
#define DELAY_TIME      200
//----------------------------------------------------------------
#define TALK        0
#define SEARCH      1
#define USE         2
//----------------------------------------------------------------
#define MAP_MAX_WIDTH_OBJ       31
#define MAP_MAX_HEIGHT_OBJ      30
//----------------------------------------------------------------
char MapData[MAP_MAX_HEIGHT_OBJ][MAP_MAX_WIDTH_OBJ];
char MapBackup[MAP_MAX_HEIGHT_OBJ][MAP_MAX_WIDTH_OBJ] =
{
    //  大地图1
    01,01,01,01,01,30,31,32,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,
    01,15,16,17,01,33,34,35,01,01, 0, 0,51,52,01, 0, 0, 0, 0, 0,01,40,41,42,01, 0,01, 0, 0, 0,01,
    01,14,19,20,65,36,37,38, 0,01, 0, 0,53,54,01, 0, 0, 0, 0, 0,01,43,44,45,65, 0,01,01,01, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01, 0, 0, 0, 0, 0,01, 0,01, 0,01,
    01,01,65, 0,01,01,01,01,65,01,01,01,01,01, 0,01,01,65,01,01,01, 0, 0,01, 0, 0,01, 0,01, 0,01,
    01,01, 0, 0, 0,01,01,01,40,41,42,01, 0, 0, 0,01,01,22,23,01,01, 0, 0,01, 0,01, 0, 0, 0, 0,01,
    01, 0,01,01, 0, 0,01,01,43,44,45,01, 0, 0, 0,01,25,26,27,28,01,01, 0, 0, 0, 0, 0, 0, 0,01,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,01, 0, 0, 6, 7, 8, 9, 0, 0,01,
    01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01, 0,10,11,12,13,65, 0,01,

    //10            x05            x10            x15            x20
    01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01,01, 0, 0, 0, 0, 0, 0, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,01,01,01,01,01,01,01,01,01,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    03,03,03,03,03,03,03,03,03,03, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    76,02,02,02,03,02,02,61,02,02, 0,03,03,03,03,03,03,03,03,03,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    73, 0, 0, 0,46, 0, 0, 0, 0,48, 0,03,02,02,02,02,02,02,56,02,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    74, 0, 0, 0,03, 0, 0, 0, 0,03, 0,03,50, 0, 0, 0,55, 0, 0,58,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    75, 0, 0, 0,46, 0, 0, 0,50,03, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,
    76,03,03,03,03,03,03,03,03,03, 0,03,03,03,03,03,03,03,03,03,03, 0, 0, 0, 0, 0, 0, 0, 0, 0,01,

    //20            x05            x10            x15            x20            x25
    03,56,02,02,02,02,02,02,02,03, 0,03,02,02,02,02,02,03,02,56,03,03,03,03,03,03,03,03,03,03,03,
    03, 0, 0, 0, 0, 0, 0, 0, 0,03, 0,03, 0, 0, 0, 0, 0,47, 0, 0,03,03,02,02,03,02,56,03,02,02,03,
    03, 0, 0,03, 0, 0,03,80, 0,03, 0,03, 0, 0, 0, 0, 0,03, 0, 0,03,03, 0, 0,03,77, 0,03, 0, 0,03,
    03,55,67,03, 0, 0,03, 0,67,03, 0,03, 0,03, 0, 0, 0,03,58, 0,47,03, 0, 0,46, 0, 0,47, 0, 0,03,
    03,03,03,03, 0, 0,03,03,03,03, 0,03, 0,03,03,03,03,03,03,03,03,03, 0, 0,03,03,03,03, 0, 0,03,
    03,02,02,02, 0, 0,02,02,02,03, 0,03,56,02,03,02,02,02,02,02,03,03, 0, 0,02,03,02,02, 0, 0,03,
    03,50, 0, 0, 0, 0, 0, 0, 0,03, 0,49, 0, 0,46, 0, 0, 0, 0, 0,03,03, 0, 0, 0,03, 0, 0, 0, 0,03,
    03,03,03,03,03, 0,03,03,03,03, 0,03, 0, 0,03, 0, 0, 0, 0, 0, 0,03, 0, 0,72,46, 0, 0, 0, 0,46,
    02,02,02,02,02, 0,02,02,02,02, 0,03, 0,57,55, 0, 0, 0, 0, 0,03,03, 0, 0, 0,03, 0, 0, 0,14,03,
    01, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03
};


char GraphicData[][40] =
{
//Blank
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,

//Tree
    0x00,0x00, 0x00,0x00, 0x1F,0xF8, 0x1E,0xFC, 0x75,0x54, 0xBA,0xBF, 0xD5,0x55, 0xEE,0xEF, 0xD5,0x55, 0x6A,0xAB,
    0x55,0x55, 0x6E,0xEF, 0x75,0x56, 0x1A,0xBA, 0x1F,0xD6, 0x01,0xFC, 0x01,0xE0, 0x01,0xA0, 0x01,0xA0, 0x01,0xE0,

//Brick
    0x3B,0xBB, 0x1F,0x1F, 0x0E,0x0E, 0x1C,0x1C, 0x38,0x38, 0x70,0x70, 0xE0,0xE0, 0xF1,0xF1, 0xBB,0xBB, 0x1F,0x1F,
    0x0E,0x0E, 0x1C,0x1C, 0x38,0x38, 0x70,0x70, 0xE0,0xE0, 0xF1,0xF1, 0xBB,0xBB, 0x1F,0x1F, 0x0E,0x0E, 0x1C,0x1C,

//Gray
    0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44,
    0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11, 0x88,0x88, 0x44,0x44, 0x22,0x22, 0x11,0x11,

//Man
    0x3F,0xFC, 0x7F,0xFE, 0xFF,0xFE, 0x7F,0xFF, 0x69,0xB6, 0xA0,0x05, 0x60,0x06, 0x20,0x04, 0x19,0x88, 0x04,0x30,
    0x3B,0xCC, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x6F,0xFA, 0x1F,0xF6, 0x38,0x70, 0x38,0x70, 0x1C,0x70, 0x3C,0x78,
    0x3F,0xFC, 0x7F,0xFE, 0xFF,0xFE, 0x7F,0xFF, 0x69,0xB6, 0xA0,0x05, 0x60,0x06, 0x20,0x04, 0x19,0x88, 0x04,0x30,
    0x3B,0xCC, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x5F,0xF6, 0x3F,0xF8, 0x0E,0x1C, 0x0E,0x1C, 0x0E,0x38, 0x1E,0x3C,

//Global View
    0x00,0x00, 0x02,0x08, 0x01,0x7F, 0x00,0x88, 0x01,0x7F, 0x04,0x3E, 0x1A,0x22, 0x27,0x3E, 0x41,0x19, 0x41,0x2E,
    0x21,0x49, 0x22,0x88, 0x24,0x7F, 0x10,0x00, 0x10,0x07, 0x10,0x07, 0x08,0x07, 0x08,0x07, 0x0C,0x03, 0x04,0x03,
    0x00,0x00, 0x08,0x10, 0x0F,0xF8, 0x08,0x10, 0x8F,0xF1, 0x78,0x16, 0x0F,0xF0, 0x08,0x10, 0x0F,0xF0, 0x02,0x40,
    0x0A,0x44, 0x0C,0x44, 0xB8,0x7F, 0x00,0x00, 0x3C,0x20, 0xC4,0x10, 0x04,0x10, 0x04,0x10, 0x04,0x1F, 0x87,0xF0,
    0x00,0x00, 0x08,0x02, 0x08,0x02, 0x08,0x42, 0xFF,0xCF, 0x08,0x02, 0x08,0x17, 0x0C,0x0A, 0x12,0x0A, 0x21,0x02,
    0x41,0x82, 0xFF,0x42, 0xC1,0xF2, 0x41,0x07, 0x41,0x04, 0x41,0x04, 0x42,0x08, 0x42,0x08, 0xFF,0xC8, 0x42,0x3C,
    0x00,0x00, 0x10,0x00, 0x7E,0x00, 0x53,0x00, 0xFF,0xC0, 0x52,0xF0, 0x52,0x38, 0x7E,0x18, 0x10,0x08, 0xFF,0x08,
    0x24,0x08, 0x18,0x18, 0xE6,0xD8, 0x98,0x70, 0x98,0x30, 0x98,0x30, 0x98,0x30, 0x98,0x20, 0xB8,0x60, 0xBF,0xE0,
    0x04,0x03, 0x06,0x03, 0x02,0x03, 0x02,0x01, 0x03,0x01, 0x01,0x01, 0x01,0x01, 0x00,0x81, 0x00,0x80, 0x00,0x80,
    0x00,0x40, 0x00,0x40, 0x00,0x20, 0x00,0x20, 0x00,0x20, 0x00,0x30, 0x00,0x10, 0x00,0x10, 0x00,0x18, 0x00,0x0F,
    0x9C,0x10, 0xC4,0x10, 0xC4,0x10, 0xC2,0x10, 0xC2,0x10, 0xC2,0x7F, 0xC7,0x80, 0xFC,0x00, 0xE1,0xE0, 0xF8,0x00,
    0xE0,0x1F, 0xE0,0x20, 0xE0,0x27, 0x70,0x24, 0x70,0x25, 0x70,0x25, 0x70,0x15, 0x38,0x15, 0x38,0x15, 0xFF,0xFF,
    0x42,0x0B, 0x42,0x09, 0x42,0x09, 0x42,0x09, 0x42,0x11, 0xFE,0x11, 0x01,0xF1, 0x00,0x0F, 0x03,0xC2, 0x00,0x32,
    0xFF,0x02, 0x01,0x02, 0xF9,0x02, 0x05,0x02, 0xF5,0x02, 0xF5,0x06, 0xF5,0x04, 0xF2,0x05, 0xF2,0x05, 0xFF,0xFD,
    0x31,0xE0, 0x30,0xE0, 0x30,0x40, 0x30,0x40, 0x30,0xC0, 0x7C,0xC0, 0x7F,0x80, 0x7F,0x80, 0x7F,0x80, 0x7F,0x80,
    0x7F,0x80, 0xFF,0x00, 0xFF,0x00, 0xFF,0x00, 0xFF,0x00, 0xFE,0x00, 0xFE,0x00, 0xFE,0x00, 0xFE,0x00, 0xFC,0x00,

//DR.
    0x1F,0xF0, 0x3F,0xDC, 0x73,0xF6, 0x5F,0x82, 0x40,0x33, 0x8C,0x19, 0x98,0x0D, 0xB4,0x11, 0xC0,0x41, 0x47,0xE3,
    0x66,0xB2, 0x6F,0xFA, 0x2E,0x3A, 0x3C,0x2E, 0x7E,0x3F, 0x53,0x45, 0x51,0xC5, 0x71,0xC7, 0x33,0xCE, 0x7F,0xFF,

//Dr. House(3x2)
    0x00,0x3F, 0x00,0x3A, 0x00,0x28, 0x00,0x46, 0x00,0x52, 0x00,0xA9, 0x00,0xA4, 0x01,0xA3, 0x01,0x41, 0x01,0x00,
    0x02,0x00, 0x04,0xC0, 0x04,0xBF, 0x09,0x0D, 0x0A,0x15, 0x32,0x17, 0x42,0x00, 0x8C,0x1F, 0x88,0x00, 0xFF,0xFF,
    0xFF,0xFC, 0x22,0x22, 0x00,0x01, 0x8A,0x8A, 0x00,0x00, 0xA2,0x22, 0x40,0x00, 0x2A,0xAA, 0xB0,0x00, 0xCA,0x22,
    0x66,0x00, 0x31,0x8A, 0x08,0x80, 0x04,0x62, 0x02,0x30, 0x81,0x8E, 0x00,0xC3, 0x00,0x20, 0x00,0x13, 0xFF,0xFE,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0xC0,0x00, 0x60,0x00, 0x30,0x00, 0x08,0x00, 0xAE,0x00, 0x01,0x80, 0x22,0x40,
    0x00,0x20, 0x8A,0x98, 0x00,0x0E, 0x22,0x23, 0x00,0x7F, 0xBF,0x83, 0xE0,0x1C, 0x01,0xE4, 0xFE,0x08, 0x00,0x08,
    0x08,0x00, 0x07,0xFF, 0x04,0x00, 0x04,0x00, 0x04,0x00, 0x04,0x00, 0x02,0x00, 0x03,0x3F, 0x01,0x20, 0x00,0xA7,
    0x00,0xAB, 0x00,0x8B, 0x00,0x8B, 0x00,0x8B, 0x00,0x89, 0x00,0x85, 0x00,0xE5, 0x00,0x1F, 0x00,0x00, 0x00,0x00,
    0x00,0x10, 0xFF,0xE0, 0x00,0x20, 0x00,0x20, 0x00,0x23, 0x00,0x22, 0x00,0x23, 0xE0,0x21, 0x38,0x21, 0xC4,0x21,
    0xE8,0x21, 0xE8,0x40, 0xE8,0x40, 0xE8,0x43, 0xE8,0x40, 0xE8,0x40, 0xE8,0x40, 0xE8,0x40, 0x7E,0x4F, 0x01,0xF0,
    0x00,0x08, 0x00,0x08, 0x00,0x18, 0x00,0x10, 0xFE,0x10, 0x02,0x10, 0xF4,0x20, 0x34,0x20, 0x74,0x20, 0x74,0x40,
    0xFA,0x40, 0x02,0x40, 0x3E,0x40, 0xC0,0x80, 0x00,0x80, 0x00,0x80, 0x03,0x80, 0x3C,0x00, 0xE0,0x00, 0x00,0x00,

//Sleep
    0xBF,0xFD, 0xFF,0xFF, 0xFF,0xFF, 0xFF,0xFF, 0xE9,0xB7, 0xA0,0x05, 0xE0,0x07, 0xA0,0x05, 0x99,0x89, 0x84,0x31,
    0xFF,0xFF, 0x80,0x01, 0xBF,0xFD, 0xEA,0xAB, 0xC4,0x45, 0xAA,0xAB, 0xD1,0x15, 0xAA,0xAB, 0xFF,0xFD, 0xC0,0x03,

//Office (4x2)
    0x00,0x00, 0x00,0xFF, 0x01,0xC4, 0x02,0xEA, 0x04,0x3F, 0x0A,0x3E, 0x10,0x14, 0x1A,0xAA, 0x20,0x05, 0x62,0x23,
    0x82,0x21, 0xAB,0xE8, 0x82,0x20, 0xA2,0x22, 0x82,0xE0, 0xAA,0x2A, 0x83,0xE0, 0xA2,0x22, 0x80,0x00, 0xA8,0xA8,
    0x00,0x00, 0xF0,0x00, 0x78,0x00, 0xFC,0x00, 0x12,0x00, 0xAB,0x00, 0x44,0x80, 0xAA,0xC0, 0x17,0xE0, 0xFF,0xF0,
    0x80,0x08, 0xFF,0xFC, 0xD5,0x58, 0xAA,0xA8, 0xD7,0xD8, 0xAB,0xE8, 0xD5,0x58, 0xAA,0xA8, 0xD5,0x58, 0xAA,0xA8,

//Smile
    0x00,0x00, 0x00,0x00, 0x03,0xE0, 0x0C,0x18, 0x10,0x04, 0x20,0x02, 0x20,0x02, 0x42,0x21, 0x40,0x01, 0x40,0x01,
    0x40,0x01, 0x48,0x09, 0x48,0x09, 0x24,0x12, 0x23,0xE2, 0x10,0x04, 0x0C,0x18, 0x03,0xE0, 0x00,0x00, 0x00,0x00,

    0x00,0x00, 0x00,0x07, 0x00,0x38, 0x00,0xF7, 0x03,0x22, 0x02,0x22, 0x02,0x72, 0x02,0xD3, 0x02,0x56, 0x02,0x52,
    0x02,0x52, 0x02,0xF4, 0x02,0x08, 0x02,0x00, 0x02,0x00, 0x02,0xA8, 0x02,0x00, 0x02,0x22, 0x01,0xFF, 0x00,0x00,
    0x80,0x00, 0xA2,0x22, 0x00,0x00, 0xE0,0x40, 0x4F,0xFD, 0x49,0x25, 0x42,0x20, 0x4C,0xBC, 0xE0,0x80, 0x47,0xE0,
    0x41,0x20, 0x42,0x24, 0x4C,0x3D, 0x03,0xE0, 0x05,0xD0, 0xA9,0xC8, 0x09,0xC8, 0x29,0xCA, 0x99,0xC8, 0xFF,0xFF,
    0xD5,0x5C, 0xFF,0xFF, 0x64,0x44, 0x08,0x2A, 0xFF,0xBF, 0x00,0xBF, 0xFF,0x04, 0x22,0x2A, 0xFF,0x31, 0x08,0x2F,
    0xFF,0x35, 0x08,0x2A, 0xFF,0xB5, 0x00,0x2A, 0x00,0x35, 0xA8,0xAA, 0x00,0x35, 0x22,0x2A, 0x00,0x35, 0xFF,0xFF,
    0x00,0x00, 0xF8,0x00, 0x44,0x00, 0xAB,0x00, 0xD1,0x80, 0xFE,0xE0, 0xFC,0x50, 0xAF,0xEC, 0x17,0xF3, 0xFF,0xFC,
    0x7D,0x58, 0xAE,0xA8, 0x65,0x58, 0xBE,0xA8, 0x55,0x58, 0xAA,0xA8, 0x55,0x58, 0xAA,0xA8, 0x7F,0xF8, 0xC0,0x00,

//Chemical
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x07,0xE0, 0x04,0x20, 0x04,0x60, 0x02,0x40, 0x02,0x40, 0x02,0x40, 0x04,0x40,
    0x08,0x20, 0x10,0x10, 0x1D,0xF8, 0x1D,0xF8, 0x1F,0xF8, 0x1F,0xF0, 0x0F,0xF0, 0x07,0xE0, 0x03,0x80, 0x00,0x00,

//Rich House(3x3)
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0xFF, 0x3F,0x22, 0x40,0x00, 0x6F,0xAA,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x01, 0x00,0x0F, 0x00,0x0F, 0x00,0x0F,
    0x00,0x1F, 0x00,0x1F, 0x00,0x1F, 0x00,0x1F, 0x00,0x1F, 0x00,0x3F, 0xC0,0x3F, 0x3F,0xFF, 0x00,0x7F, 0xAA,0xAF,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x1F,0xE0, 0xFF,0xD8, 0xFF,0xAC, 0xFF,0xD4, 0xFF,0xA8,
    0xFF,0x58, 0xFF,0xA8, 0xFF,0x58, 0xFF,0xB0, 0xFF,0x50, 0xFE,0xB0, 0xFF,0x60, 0xFE,0xA0, 0xFD,0x60, 0xFE,0xA0,
    0x60,0x00, 0x7E,0x22, 0x23,0x80, 0x3A,0x8A, 0x20,0x00, 0x3A,0x22, 0x30,0x00, 0x3A,0xAA, 0x10,0x00, 0x12,0x22,
    0x10,0xFC, 0x1F,0x0F, 0x11,0x0C, 0x11,0x0C, 0x11,0x0C, 0x08,0x8C, 0x08,0x88, 0x08,0x88, 0x0F,0xFF, 0x78,0x00,
    0x00,0x00, 0x22,0x22, 0x00,0x00, 0x8A,0x8A, 0x00,0x01, 0x22,0x23, 0x00,0x01, 0xAA,0xAB, 0x00,0x01, 0x22,0x23,
    0x00,0x03, 0xFA,0x8B, 0x37,0x03, 0x20,0xFF, 0x20,0x87, 0x20,0x87, 0x20,0x87, 0x21,0x07, 0xA1,0x07, 0xFF,0x0F,
    0xFD,0x40, 0xFE,0xC0, 0xFD,0x70, 0xFA,0xCC, 0xFD,0x42, 0xFA,0xE2, 0xFD,0x82, 0xFA,0xAA, 0xF5,0x84, 0xFA,0xA4,
    0xF5,0x84, 0xEB,0x8C, 0xF5,0x0C, 0xEB,0x22, 0xF5,0x01, 0xEA,0xAB, 0xD6,0x01, 0xEB,0xA3, 0xD6,0x71, 0xEE,0x4B,
    0x80,0x00, 0x80,0x00, 0x9F,0xFF, 0xFF,0xFF, 0xFF,0xFF, 0x3F,0xFF, 0x11,0xC0, 0x11,0x00, 0x11,0x00, 0x11,0x7F,
    0x11,0x40, 0x11,0x7F, 0x11,0x44, 0x12,0x44, 0x12,0x44, 0x12,0x44, 0x12,0x44, 0x12,0x44, 0x7F,0xFF, 0x00,0x00,
    0x03,0xFF, 0x00,0x0F, 0xC0,0x0F, 0xFE,0x3F, 0xFF,0xCF, 0xFF,0xCF, 0x18,0xCF, 0x08,0xBF, 0x08,0x8F, 0xE8,0x8F,
    0x29,0x0F, 0xE9,0x0F, 0x69,0x0F, 0x69,0x1F, 0x49,0x1F, 0x4A,0x1F, 0x4A,0x1F, 0x4F,0xFE, 0xFF,0xFF, 0x01,0xFF,
    0xD4,0x4F, 0xAC,0x89, 0xD4,0x91, 0xAC,0x91, 0xD8,0x93, 0xBF,0xFF, 0x7F,0xFF, 0xC0,0x01, 0x40,0x3D, 0xDD,0x81,
    0x43,0x79, 0xC0,0x01, 0x47,0x3D, 0xC0,0x01, 0x7F,0xFF, 0xBA,0x38, 0x52,0x38, 0xB2,0x30, 0xFA,0x30, 0xFB,0xF0,
//Error (39)(0x27)
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00,

//Rapid(3x2)
    0x00,0x00, 0x00,0x01, 0x00,0x03, 0x00,0x3F, 0x00,0x7F, 0x00,0xFF, 0x00,0x01, 0x00,0x00, 0x00,0x1F, 0x00,0xF8,
    0x01,0x90, 0x01,0x17, 0x01,0x38, 0x01,0x17, 0x01,0x98, 0x00,0xB7, 0x00,0x92, 0x00,0x92, 0x00,0x95, 0x01,0x78,
    0xFC,0x00, 0xC0,0x00, 0xBF,0x00, 0xFF,0x80, 0xE3,0xFF, 0xC7,0xFE, 0xFF,0xFD, 0xFD,0xC0, 0x03,0x80, 0x3F,0x00,
    0x84,0xFE, 0xF2,0xBA, 0xA4,0x10, 0xF2,0x7C, 0xA0,0x54, 0xE6,0x7C, 0x82,0x54, 0xF2,0xFE, 0x85,0x11, 0xF4,0xFF,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0xE0,0x00, 0x30,0x00, 0x3C,0x00, 0x3E,0x00,
    0x7F,0x00, 0x7F,0xC0, 0x7F,0xE0, 0x7F,0xF0, 0xFF,0xF0, 0xFF,0xE0, 0xFF,0xE0, 0xFF,0xE0, 0xFF,0xC0, 0xFF,0xC0,
    0x02,0xC0, 0x02,0x7F, 0x0A,0x53, 0x14,0x32, 0x14,0x12, 0x14,0x12, 0x24,0x12, 0x24,0x12, 0x24,0x12, 0x44,0x12,
    0x44,0x12, 0x22,0x12, 0x21,0x92, 0x02,0x5F, 0x1E,0x70, 0x08,0x5F, 0x08,0x40, 0x08,0x7F, 0x0C,0x40, 0x01,0xFF,
    0x3C,0xF1, 0xE7,0x9F, 0xE4,0x90, 0x24,0x90, 0x27,0x9E, 0xE7,0x9E, 0xE7,0x9E, 0xE7,0x9E, 0xE7,0x9E, 0xE7,0x9C,
    0xE7,0x9C, 0xE7,0x9C, 0xE7,0x9C, 0xFF,0xFF, 0x00,0x00, 0xFF,0x0B, 0x00,0x0A, 0xFC,0x0A, 0x00,0x0A, 0xFF,0xFF,
    0xFF,0xC0, 0xFF,0x80, 0x3C,0x80, 0x38,0x40, 0x38,0x38, 0x70,0x24, 0x70,0x24, 0x70,0x24, 0x60,0x24, 0x60,0x24,
    0x40,0x24, 0x80,0x24, 0x80,0x44, 0xC0,0x44, 0x40,0x44, 0x60,0xC4, 0x10,0xFC, 0x0E,0xA0, 0x0B,0xE0, 0xFD,0xE0,

//Door Close
    0xFF,0xFF, 0xAB,0xEA, 0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xAB,0x6A,
    0x55,0x75, 0xAB,0x6A, 0x55,0x75, 0xFF,0x7F, 0x01,0x60, 0x01,0x60, 0x01,0x60, 0x01,0x60, 0x01,0x60, 0x01,0xE0,

//Door Open
    0xFF,0xFF, 0xAB,0xEA, 0x56,0xD5, 0xAD,0x6A, 0x5A,0x55, 0xBC,0x6A, 0x68,0x55, 0xA8,0x6A, 0x68,0x55, 0xA8,0x6A,
    0x68,0x55, 0xA8,0x6A, 0x68,0x55, 0xE8,0x7F, 0x28,0x80, 0x29,0x00, 0x2A,0x00, 0x3C,0x00, 0x00,0x00, 0x00,0x00,

//Stair1
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x01,0xFF, 0x01,0x80, 0x01,0x40, 0x01,0x20, 0x0F,0x1F, 0x0C,0x95, 0x0A,0x5A,
    0x09,0x35, 0x78,0xFA, 0x64,0xD5, 0x52,0xAA, 0x49,0xD5, 0x47,0xAA, 0x45,0x55, 0x26,0xAA, 0x15,0x55, 0x0E,0xAA,

//Stair2
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0xFF,0x80, 0x01,0x80, 0x02,0x80, 0x04,0x80, 0xF8,0xF0, 0xA9,0x30, 0x5A,0x50,
    0xAC,0x90, 0x5F,0x1E, 0xAB,0x26, 0x55,0x4A, 0xAB,0x92, 0x55,0xE2, 0xAA,0xA2, 0x55,0x64, 0xAA,0xA8, 0x55,0x70,

//Flower
    0x00,0x60, 0x00,0xF0, 0x00,0x90, 0x30,0x90, 0x38,0xB0, 0x2C,0xE0, 0x25,0xC0, 0x13,0x00, 0x0B,0x00, 0x0F,0xE0,
    0x37,0x58, 0x6B,0xAC, 0x77,0x5C, 0x4F,0xE4, 0x70,0x1C, 0x2F,0xE8, 0x20,0x08, 0x10,0x10, 0x10,0x10, 0x0F,0xE0,

//Home (2x2)
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0xFF, 0x01,0x44, 0x03,0xAA, 0x02,0x91,
    0x05,0xEA, 0x05,0x44, 0x0A,0xEA, 0x16,0x31, 0x14,0xBA, 0x3E,0x34, 0x58,0xBA, 0xFA,0x39, 0xF8,0x8E, 0x4A,0x26,
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0xFF,0xC0, 0x44,0x40, 0xAA,0xA0, 0x11,0x20,
    0xAA,0xB0, 0x44,0x50, 0xAA,0xA8, 0x11,0x18, 0xAA,0xAC, 0x44,0x44, 0xAA,0xAA, 0x11,0x12, 0xAA,0xAB, 0x44,0x45,
    0x08,0x8F, 0x0A,0x23, 0x08,0x88, 0x0A,0x22, 0x08,0x88, 0x0B,0xE2, 0x09,0x38, 0x0B,0x12, 0x09,0x18, 0x0B,0x12,
    0x05,0x18, 0x07,0x12, 0x05,0x18, 0x07,0x12, 0x05,0x18, 0x07,0x12, 0x01,0x18, 0x00,0xF2, 0x00,0x1C, 0x00,0x03,
    0xAA,0xFE, 0xFF,0xD6, 0xAA,0xBA, 0xDD,0x76, 0xB6,0xDA, 0xD5,0x56, 0xB6,0xFA, 0xDD,0x56, 0xAA,0xAA, 0xD5,0x56,
    0xAA,0xAA, 0xD5,0x56, 0xAA,0xAA, 0xD5,0x56, 0xAA,0xAB, 0xD5,0x55, 0xEA,0xAB, 0x55,0x7F, 0xEF,0xC0, 0xF8,0x00,

//Table
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0xFF,0xFF, 0xAA,0xAB, 0xD5,0x55, 0xAA,0xAB, 0xD5,0x55, 0xAA,0xAB,
    0xD5,0x55, 0xFF,0xFF, 0x80,0x01, 0xFF,0xFF, 0x54,0x2A, 0x5C,0x3A, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x70,0x0E,

//Cabinet
    0xFF,0xFF, 0xA0,0x06, 0x60,0x05, 0xA0,0x06, 0x60,0x05, 0xBF,0xFE, 0x60,0x05, 0xAF,0xF6, 0x68,0x15, 0xA9,0x96,
    0x68,0x15, 0xAF,0xF6, 0x60,0x05, 0xEF,0xF7, 0x28,0x14, 0x29,0x94, 0x28,0x14, 0x2F,0xF4, 0x20,0x04, 0x3F,0xFC,

//Girl
    0x0F,0xFC, 0x1B,0xFE, 0x39,0xFE, 0x30,0x7F, 0x20,0x1F, 0x40,0x1F, 0x44,0x27, 0x20,0x01, 0x20,0x02, 0x22,0x22,
    0x51,0xC5, 0x6E,0x1F, 0xC7,0xF1, 0x0C,0x18, 0x14,0x14, 0x14,0x14, 0x14,0x14, 0x1C,0x1C, 0x07,0xF0, 0x0F,0x38,

//Bed
    0xDF,0xFB, 0xA0,0x05, 0xA0,0x05, 0xA0,0x05, 0xA0,0x05, 0x9F,0xF9, 0xBF,0xFD, 0xC0,0x03, 0x80,0x01, 0xBF,0xFD,
    0xC4,0x47, 0xAA,0xAB, 0x91,0x11, 0xAA,0xAB, 0xC4,0x45, 0xAA,0xAB, 0x91,0x11, 0xAA,0xAB, 0xFF,0xFD, 0xC0,0x03,

//Police
    0x0F,0xE0, 0x70,0x18, 0x80,0x04, 0x80,0x14, 0x9F,0xCE, 0xC0,0x0A, 0x7F,0xFB, 0x80,0x01, 0x80,0x02, 0xC0,0x02,
    0x63,0x84, 0x20,0x08, 0x1F,0xF0, 0x22,0x8C, 0x41,0x03, 0x8D,0x6D, 0xB1,0x0B, 0xDF,0xF8, 0x1F,0xF8, 0x3F,0x7C,

//Slingshot
    0x00,0x00, 0x00,0x00, 0x60,0x30, 0x90,0x48, 0xF8,0x7C, 0xFC,0x7C, 0xBC,0x6C, 0x96,0x4E, 0xB3,0x6A, 0x91,0xCB,
    0xA8,0xE9, 0x8F,0xE9, 0x62,0x71, 0x28,0xBB, 0x12,0x4E, 0x18,0xC0, 0x12,0x40, 0x18,0xC0, 0x1A,0xC0, 0x0F,0x80,

//Ticket Machine
    0xFF,0xFF, 0xA0,0x06, 0x60,0x05, 0xA0,0x06, 0x60,0x05, 0xBF,0xFE, 0x7F,0xFD, 0xB0,0x0E, 0x76,0xCD, 0xB0,0x0E,
    0x75,0x6D, 0xB0,0x0E, 0x77,0xED, 0xFF,0xFF, 0x31,0x0C, 0x3F,0xFC, 0x3B,0x9C, 0x3F,0xFC, 0x31,0x0C, 0x3F,0xFC,

//Money
    0x00,0x00, 0x00,0x00, 0x00,0x0C, 0x00,0x1E, 0x00,0x37, 0x00,0x7B, 0x00,0xDD, 0x03,0xA2, 0x0F,0x61, 0x3A,0xA2,
    0xF7,0x57, 0x7B,0xEE, 0x35,0x78, 0x1B,0xB0, 0x0D,0xE0, 0x07,0xC0, 0x03,0x80, 0x00,0x00, 0x00,0x00, 0x00,0x00,

//Ticket
    0x00,0x00, 0x3F,0xF8, 0x2A,0xB8, 0x2A,0xB8, 0x2B,0xF8, 0x2B,0xF8, 0x2A,0x38, 0x2A,0x38, 0x2A,0x38, 0x2A,0x38,
    0x2A,0x38, 0x2A,0x38, 0x2A,0x38, 0x2B,0x38, 0x2C,0xB8, 0x22,0xB8, 0x22,0xB8, 0x22,0xB8, 0x3F,0xF8, 0x00,0x00,

//Cellphone
    0x00,0x00, 0x18,0x00, 0x18,0x00, 0x18,0x00, 0x3F,0x80, 0x20,0x60, 0x2F,0x90, 0x30,0x50, 0x30,0x30, 0x30,0x30,
    0x30,0x30, 0x2F,0xD0, 0x20,0x10, 0x2D,0x50, 0x20,0x10, 0x2D,0x50, 0x20,0x10, 0x2D,0x50, 0x18,0x60, 0x0F,0xC0,

//Streetlamp
    0x01,0x00, 0x03,0x80, 0x05,0x40, 0x0F,0xE0, 0x04,0x40, 0x04,0x40, 0x03,0x80, 0x01,0x00, 0x01,0x00, 0x01,0x00,
    0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x01,0x00, 0x03,0x80, 0x07,0xC0, 0x0F,0xE0,

//Invoice
    0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00, 0x7F,0xE0, 0x40,0x30, 0x40,0x28, 0x5E,0x3C, 0x40,0x04, 0x4B,0xC4,
    0x40,0x04, 0x5D,0xD4, 0x40,0x04, 0x47,0xE4, 0x58,0x04, 0x40,0x04, 0x40,0x74, 0x40,0x04, 0x7F,0xFC, 0x00,0x00,

//Computer
    0x1F,0xFC, 0x18,0x0C, 0x14,0x14, 0x13,0xE4, 0xF2,0x27, 0xB2,0x27, 0xD3,0xF5, 0xBF,0xFF, 0xC6,0x31, 0xAC,0x1B,
    0xDB,0xED, 0xFF,0xFF, 0x80,0x01, 0xFF,0xFF, 0x54,0x2A, 0x5C,0x3A, 0x50,0x0A, 0x50,0x0A, 0x50,0x0A, 0x70,0x0E,

//CC800
    0x0C,0x00, 0x0F,0x00, 0x0B,0xC0, 0x08,0xF0, 0x0B,0x3C, 0x0A,0xCF, 0x0A,0x33, 0x09,0x0D, 0x16,0xC5, 0x27,0xB5,
    0x38,0xED, 0x42,0x39, 0x90,0x8F, 0xC4,0x25, 0xF1,0x0F, 0x3C,0x5E, 0x0F,0x3C, 0x03,0xF8, 0x00,0xF0, 0x00,0x60,

//Water
    0x05,0x18, 0x0A,0x2C, 0x1C,0x46, 0x78,0x8B, 0x51,0x11, 0x62,0x23, 0xC4,0x45, 0x88,0x8B, 0x91,0x14, 0xA2,0x24,
    0xC4,0x46, 0x68,0x8B, 0x31,0x11, 0x22,0x3B, 0x64,0x7F, 0x68,0xAE, 0x71,0xE0, 0x3B,0x80, 0x1F,0x00, 0x00,0x00,

//Cabinet Open
    0xFF,0xFF, 0xA0,0x05, 0x60,0x06, 0xA0,0x05, 0x60,0x06, 0xBF,0xFD, 0x60,0x06, 0xAF,0xF5, 0x6D,0x6A, 0xAA,0xA4,
    0x6D,0x62, 0xAF,0xF2, 0x60,0x0A, 0xEF,0xF6, 0x2D,0x6A, 0x2A,0xA4, 0x2D,0x62, 0x2F,0xF2, 0x20,0x0A, 0x3F,0xFE,

//Bad Man Left
    0x07,0xF0, 0x1F,0xFC, 0x3F,0xFE, 0x71,0xFE, 0xE0,0x5F, 0xFF,0xFF, 0x7D,0xEF, 0x3D,0xCE, 0x10,0x0C, 0x10,0x38,
    0x1F,0xD8, 0x04,0x24, 0x0C,0x24, 0x14,0x24, 0x13,0xE4, 0x16,0xBC, 0x1D,0xD8, 0x06,0xA8, 0x05,0xD8, 0x1F,0xFC,

//Bad Man Right
    0x0F,0xE0, 0x3F,0xF8, 0x7F,0xFC, 0x7F,0x8E, 0xFA,0x07, 0xFF,0xFF, 0xF7,0xBE, 0x73,0xBC, 0x30,0x08, 0x1C,0x08,
    0x1B,0xF8, 0x24,0x20, 0x24,0x30, 0x24,0x28, 0x27,0xC8, 0x3D,0x68, 0x1B,0xB8, 0x15,0x60, 0x1B,0xA0, 0x3F,0xF8,

//Rapid
    0xFF,0x98, 0x81,0x58, 0x00,0xB8, 0x00,0x98, 0x00,0x68, 0x30,0x54, 0x48,0x4A, 0x48,0x45, 0x48,0x63, 0x48,0x71,
    0x48,0x79, 0x48,0x7D, 0x48,0x7F, 0x48,0x7F, 0x30,0x7F, 0x00,0x7F, 0x00,0x5F, 0x00,0x4F, 0xFF,0xE7, 0x80,0x13,
    0x40,0x09, 0xFF,0xE5, 0x00,0x53, 0x00,0x49, 0x30,0x65, 0x48,0x63, 0x48,0x71, 0x48,0x79, 0x48,0x7D, 0x48,0x7F,
    0x48,0x7F, 0x48,0x7F, 0x48,0x7F, 0x30,0x7F, 0x00,0x5F, 0x00,0x4F, 0xFF,0xE7, 0x40,0x13, 0x20,0x09, 0xFF,0xE5,
    0x00,0x53, 0x00,0x49, 0x30,0x45, 0x48,0x63, 0x48,0x71, 0x48,0x79, 0x48,0x7D, 0x48,0x7F, 0x48,0x7F, 0x48,0x7F,
    0x48,0x7F, 0x30,0x5F, 0x00,0x4F, 0xFF,0xC7, 0x80,0x23, 0x40,0x11, 0x27,0x89, 0x13,0xC5, 0x09,0xE3, 0x07,0xFF,

//Track
    0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98,
    0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98, 0x51,0x98, 0xB1,0x98,

//Closestool
    0x07,0xE0, 0x08,0x10, 0x13,0xC8, 0x24,0x24, 0x24,0x24, 0x24,0x24, 0x24,0x24, 0x24,0x24, 0x13,0xC8, 0x08,0x10,
    0x0F,0xF0, 0x10,0x08, 0x27,0xE4, 0x27,0xE4, 0x30,0x0C, 0x2F,0xF4, 0x10,0x08, 0x10,0x08, 0x0F,0xF0, 0x1F,0xF8,

//Toilet paper
    0x00,0x00, 0x00,0x18, 0x00,0xE8, 0x03,0x04, 0x1C,0x04, 0x60,0x02, 0x40,0x02, 0x20,0x01, 0x60,0x06, 0x50,0x7B,
    0x73,0x9F, 0x6C,0xED, 0x37,0x36, 0x78,0xD8, 0x73,0x63, 0x3D,0xBC, 0x37,0xC0, 0x1C,0x00, 0x08,0x00, 0x00,0x00,

//Sad
    0x00,0x00, 0x00,0x00, 0x03,0xE0, 0x0C,0x18, 0x10,0x04, 0x20,0x02, 0x20,0x02, 0x42,0x21, 0x40,0x01, 0x40,0x01,
    0x40,0x01, 0x43,0xE1, 0x44,0x11, 0x28,0x0A, 0x20,0x02, 0x10,0x04, 0x0C,0x18, 0x03,0xE0, 0x00,0x00, 0x00,0x00,

//Asistant
    0x03,0xC0, 0x0F,0xF0, 0x1E,0x30, 0x1C,0x18, 0x30,0x0C, 0x72,0x26, 0x20,0x08, 0x20,0x08, 0x19,0xC8, 0x08,0x10,
    0x07,0xF8, 0x1F,0x5E, 0x23,0xD1, 0x4F,0xDF, 0xBF,0xF0, 0x4F,0xD0, 0x07,0x30, 0x0F,0x98, 0x1F,0xC4, 0x1E,0x7C
};

//----------------------------------------------------------------
//int CheckStatus(void);
//void DrawGraphic(int x, int y, int iObjectID);
//void DrawMap(void);
//void DisplayMessage(int iObjectID, char *sMessage);
//int IsWalkable(void);
//void Talk(void);
//void Search(void);
//int DisplayMenu(int x, int y, char sItems[][11], unsigned char *caObject, int iItemCount);
//void RapidMove(void);
//void RapidBack(void);
//----------------------------------------------------------------
int max_ThingCount;
char mem_ThingBox[10];
char str_ThingBox[10][11];

char str_MenuItem[3][11] =
{
    "交谈　　  ",
    "查看四周  ",
    "使用物品  "
};

int cnt_MenuItem;
int g_iStory;
int man_x, man_y;
int map_x, map_y;
int rec_x, rec_y;
int rec_man_x, rec_man_y;
int rec_map_x, rec_map_y;
char max_width_obj, max_height_obj;
char cur_room;
//----------------------------------------------------------------
//int _WIDTH = 160;
//int _HEIGHT = 80;
//
long check_WIDTH_HEIGHT()
{
    //_WIDTH = LCD_W;
    //_HEIGHT = LCD_H;
#define _WIDTH  LCD_W
#define _HEIGHT LCD_H
    return -1;
}

//----------------------------------------------------------------
void DrawGraphic(int x, int y, int iObjectID)
{
    WriteBlock(x * OBJECT_WIDTH_DOT, y * OBJECT_HEIGHT_DOT, 16, 20, WB_COPY, GraphicData[iObjectID]); //fix.
}

void DrawBlock(int x, int y, int mode)
{
    x = x * OBJECT_WIDTH_DOT;
    y = y * OBJECT_HEIGHT_DOT;
    Block(x, y, x + (OBJECT_WIDTH_DOT - 1), y + (OBJECT_HEIGHT_DOT - 1), mode);
}

//空间不足，暂时改为不传参数
void set_room(char room)
{
    cur_room = room;
    if (cur_room == 1)
    {// 普通房间
        max_width_obj = 160/OBJECT_WIDTH_DOT;
        max_height_obj = 80/OBJECT_HEIGHT_DOT;
    }
    else if (cur_room == 2)
    {// 大地图-汐止
        max_width_obj = LCD_MAX_WIDTH_OBJ;
        if (max_width_obj > 11)
        {
            max_width_obj = 11;//debug
        }
        max_height_obj = LCD_MAX_HEIGHT_OBJ;
    }
    else if (cur_room == 3)
    {// 研究所/绑架屋
        max_width_obj =160/OBJECT_WIDTH_DOT;
        max_height_obj = LCD_MAX_HEIGHT_OBJ;
    }
    else //if (cur_room == 0)
    {// 大地图
        max_width_obj = LCD_MAX_WIDTH_OBJ;
        max_height_obj = LCD_MAX_HEIGHT_OBJ;
    }
}
//void DrawMap(int iMapX, int iMapY, int iManX, int iManY)
void DrawMap()
{
    int x, y;

    for (y = 0; y < LCD_MAX_HEIGHT_OBJ; y = y + 1)
    {
        for (x = 0; x < LCD_MAX_WIDTH_OBJ; x = x + 1)
        {
            if (x >= max_width_obj || y >= max_height_obj)
            {
                //DrawGraphic(x, y, 0);
                //DrawGraphic(x, y, 3);
                if (cur_room == 2)
                {// 大地图-汐止
                    DrawGraphic(x, y, OBJ_TREE);
                }
                else
                {
                    DrawBlock(x, y, 1);
                }
            }
            else
            {
                DrawGraphic(x, y, MapData[map_y + y][map_x + x]);
            }
        }
    }
}

//----------------------------------------------------------------
void RapidMove()
{
    man_y = 4;

    map_x = 0;
    map_y = 15;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 73;
    MapData[16][0] = 74;
    MapData[17][0] = 75;
    MapData[18][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 74;
    MapData[16][0] = 75;
    MapData[17][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 75;
    MapData[16][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);
}

//----------------------------------------------------------------
void RapidBack()
{
    MapData[15][0] = 76;
    MapData[16][0] = 76;
    MapData[17][0] = 76;
    MapData[18][0] = 76;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 74;
    MapData[16][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 73;
    MapData[16][0] = 74;
    MapData[17][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[15][0] = 76;
    MapData[16][0] = 73;
    MapData[17][0] = 74;
    MapData[18][0] = 75;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);
}

//----------------------------------------------------------------
void DisplayMessage(int iObjectID, addr sMessage)
{
    int x0, f_end;
    int i, n;
    char ch[3];
    int lcd_w, lcd_h;
    lcd_w = max_width_obj * OBJECT_WIDTH_DOT;
    lcd_h = max_height_obj * OBJECT_HEIGHT_DOT;
    Block(1, lcd_h-20, lcd_w-1, lcd_h-1, 0);//fix.
    Rectangle(20, lcd_h-20, lcd_w-1, lcd_h-1, 1);//fix.
    WriteBlock(0 *16, lcd_h-20, 16, 20, WB_COPY, GraphicData[iObjectID]); //fix.
    //DrawGraphic(0, LCD_HEIGHT_END, iObjectID);

    ch[2] = 0;
    f_end = 0;
    x0 = 24;
    lcd_w = ((lcd_w - 40) / 6) & ~1;
    for (;;)
    {
        for (n = 0; n < lcd_w; n++)
        {
            ch[0] = *(sMessage+n);
            if (ch[0] == 0)
            {
                f_end = 1;
                break;
            }
            if (ch[0] & 0x80)
            {
                n = n + 2;
                break;
            }
            if (ch[0] == ' ')
            {
                if (n == 0)
                {
                    sMessage++;
                    n--;
                    continue;
                }
                n++;
                break;
            }
        }
        if (x0 > 24+(lcd_w+1)*6-n*6)
        {
            TextOut(24+lcd_w*6, lcd_h-16, ">>", WB_COPY);
            Refresh();
            getchar();
            Block(24, lcd_h-16, 23+(lcd_w+2)*6, lcd_h-5, 0);
            x0 = 24;
        }
        if (*sMessage != 0)
        {
            for(i=0; i<n; i++)
            {
                ch[0] = *sMessage++;
                ch[1] = 0;
                if (ch[0] & 0x80)
                {
                    ch[1] = *sMessage++;
                    i++;
                }
                TextOut(x0, lcd_h-16, ch, WB_COPY);
                Refresh();
                if (ch[1] == 0)
                {
                    x0 = x0 + 6;
                    Delay(25);
                }
                else
                {
                    x0 = x0 + 12;
                    Delay(50);
                }
            }
        }
        if (f_end != 0)
        {
            getchar();
            break;
        }
    }
}

//----------------------------------------------------------------
int DisplayMenu(addr sItems, addr caObject, int iItemCount) //
{
    int i, iBase, iThingIndex, x_dot, y_dot, iSelected, iTemp;
    int ch;

    iBase = 0;
    iSelected = 0;

    while (1)
    {
        Block(30, 19, 112, 79, 0);//fix.
        //Rectangle(30, 19, 112, 79, 1);//fix.
        for (i = 0; i < 3; i++)
        {
            iThingIndex = iBase + i;
            if (iThingIndex < iItemCount)
            {
                if (caObject != NULL)
                {
                    DrawGraphic(2, i + 1, *(caObject + iThingIndex));
                    x_dot = 50;
                }
                else
                {
                    x_dot = 34;
                }
                y_dot = (i + 1) *20+4;
                TextOut(x_dot, y_dot, sItems + iThingIndex * 11, WB_COPY);
            }
            else
            {
                break;
            }
        }
        iTemp = (iSelected + 1) *20+2;
        Block(x_dot, iTemp, x_dot + 5 * 12 - 1, iTemp + 15, WB_NOT);//fix.
        Rectangle(30, 19, 112, 79, 1);//fix.
        Refresh();
        ch = getchar();
        if (ch == KEY_UP || ch=='w')
        {
            if (iSelected > 0)
            {
                iSelected--;
            }
            else
            {
                if (--iBase < 0)
                {
                    if (iItemCount<3)
                    {
                        iBase = 0;
                        iSelected = iItemCount - 1;
                    }
                    else
                    {
                        iBase = iItemCount - 3;
                        iSelected = 2;
                    }
                }
            }
        }
        else if (ch == KEY_DOWN || ch=='s')
        {
            if (iSelected < 2 && iSelected < iItemCount - 1)
            {
                iSelected++;
            }
            else
            {
                if (++iBase > iItemCount - 3)
                {
                    iBase = 0;
                    iSelected = 0;
                }
            }
        }
        else if (ch == KEY_ENTER || ch=='k'|| ch=='.' || ch==KEY_F1)
        {
            break;
        }
        else if (ch == KEY_ESC || ch=='j' || ch=='p' || ch==KEY_F2)
        {
            return  - 1;
        }

    }
    return (iBase + iSelected);
}

//----------------------------------------------------------------
void PoliceSeekRichHouse()
{
    int iTempX, iTempY;
    int iMapX, iMapY;

    iMapX = map_x;
    iMapY = map_y;

    map_x = 0;
    map_y = 0;

    iTempY = man_y;
    man_y = 4;
    DrawMap();

    DisplayMessage(OBJ_POLICE, "奇怪，隔壁屋子的警铃怎么会响，我得过去查查看");

    MapData[2][1] = OBJ_DRHOUSE4;
    for (iTempX = 1; iTempX <= 5; iTempX = iTempX + 1)
    {
        DrawMap();
        DrawGraphic(iTempX, 3, OBJ_POLICE);
        Refresh();
        Delay(DELAY_TIME);
    }
    DrawMap();
    DrawGraphic(5, 2, OBJ_POLICE);
    Refresh();
    Delay(DELAY_TIME);
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    //Police go away
    g_iStory = 30;
    man_y = iTempY;
    map_x = iMapX;
    map_y = iMapY;
}

//----------------------------------------------------------------
void BadManGoAway()
{
    int iMapX, iMapY;

    iMapX = map_x;
    iMapY = map_y;
    map_x = 21;
    map_y = 25 - FIX_H;//fix
    MapData[27][24] = OBJ_BLANK;
    MapData[27][23] = OBJ_BADMANL;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    DisplayMessage(OBJ_BADMANR, "咦，厕所怎么漏水了，过去看看。");

    MapData[27][23] = OBJ_BLANK;
    MapData[26][23] = OBJ_BADMANL;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[26][23] = OBJ_BLANK;
    MapData[25][23] = OBJ_BADMANL;
    DrawMap();
    Refresh();
    Delay(DELAY_TIME);

    MapData[25][23] = OBJ_BLANK;
    MapData[22][26] = OBJ_BADMANL;
    map_x = iMapX;
    map_y = iMapY;
}

//----------------------------------------------------------------
void TheEnd()
{
    int x;
    set_room(1);
    ClearScreen();
    DisplayMessage(OBJ_BLANK, "-The End- ");
    DisplayMessage(OBJ_MAN, "等等，等等，怎么这样就结束了");
    DisplayMessage(OBJ_SAD, "没办法因为32K 的空间已经用完了");
    DisplayMessage(OBJ_MAN, "不行，我好不容易才救出博士，也要有个动画或什么的");
    DisplayMessage(OBJ_SMILE, "好吧");

    ClearScreen();
    x = 1;
    DrawGraphic(x + 4, 1, OBJ_MAN);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_DR, "糟了，他追来了");

    ClearScreen();
    x++;
    DrawGraphic(x, 1, OBJ_BADMANR);
    DrawGraphic(x + 4, 1, OBJ_MAN2);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_BADMANR, "站住，别跑");

    ClearScreen();
    x++;
    DrawGraphic(x, 1, OBJ_BADMANR);
    DrawGraphic(x + 4, 1, OBJ_MAN);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_MAN, "救命…救命…");

    ClearScreen();
    x++;
    DrawGraphic(x, 1, OBJ_BADMANR);
    DrawGraphic(x + 4, 1, OBJ_MAN2);
    DrawGraphic(x + 5, 1, OBJ_DR);
    DisplayMessage(OBJ_BADMANR, "站住，别跑");
    DisplayMessage(OBJ_MAN, "呜～我不要这样的结局动画");

    ClearScreen();
    DisplayMessage(OBJ_SMILE, "-The End-");
    exit(0);
}

//----------------------------------------------------------------
void Thing_GetObjectName(char cThingID, addr sName)
{
    if (cThingID == OBJ_SLINGSHOT)
    {
        strcpy(sName, "弹弓      ");
    }
    else if (cThingID == OBJ_TICKET)
    {
        strcpy(sName, "捷运车票  ");
    }
    else if (cThingID == OBJ_INVOICE)
    {
        strcpy(sName, "送修单据  ");
    }
    else if (cThingID == OBJ_CC800)
    {
        strcpy(sName, "CC800     ");
    }
    else if (cThingID == OBJ_TOILETPAPER)
    {
        strcpy(sName, "厕纸      ");
    }
    else
    {
        strcpy(sName, "细菌培养液");
    }
}

//----------------------------------------------------------------
void Thing_Exchange(char cOldThingID, char cNewThingID)
{
    int i;

    for (i=0; i<max_ThingCount; i++)
    {
        if (mem_ThingBox[i] == cOldThingID)
        {
            mem_ThingBox[i] = cNewThingID;
            Thing_GetObjectName(cNewThingID, str_ThingBox[i]);
            break;
        }
    }
}

//----------------------------------------------------------------
int Thing_Add(char cThingID)
{
    int i;

    for (i = 0; i < max_ThingCount; i = i + 1)
    {
        if (mem_ThingBox[i] == cThingID)
        {
            return 0;
            //iResult=1;
            //break;
        }
    }
    //if (Thing_IsExist(cThingID))
    //{
    //    return 0;
    //}
    mem_ThingBox[max_ThingCount] = cThingID;
    Thing_GetObjectName(cThingID, str_ThingBox[max_ThingCount]);
    max_ThingCount++;
    return 1;
}

void BackupXY()
{
    rec_man_x = rec_x;
    rec_man_y = rec_y;
    rec_map_x = map_x;
    rec_map_y = map_y;
}

void RestoreXY()
{
    man_x = rec_man_x;
    man_y = rec_man_y;
    map_x = rec_map_x;
    map_y = rec_map_y;
}

//----------------------------------------------------------------
int CheckStatus()
{
    int x, y, iStatus;

    iStatus = 0;

    //取得人物的绝对座标
    x = map_x + man_x;
    y = map_y + man_y;

    //走进捷运站
    if (x == 9 && y == 6)
    {
        BackupXY();
        map_x = 0;
        map_y = 15;
        man_x = 8;
        man_y = 1;
        set_room(1);
        iStatus = 1;
    }

    //离开捷运站
    else if (x == 9 && y == 16)
    {
        map_x = 5;
        map_y = 5-FIX_H;
        man_x = 4;
        man_y = 2+FIX_H;
        set_room(0);
        //RestoreXY();
        iStatus = 1;
    }

    //走进研究室
    else if (x == 17 && y == 6)
    {
        BackupXY();
        map_x = 0;
        map_y = 25-FIX_H;
        man_x = 5;
        man_y = 2+FIX_H;
        set_room(3);
        iStatus = 1;
    }

    //离开研究室
    else if (x == 5 && y == 28)
    {
        //map_x = 13;
        //map_y = 5-FIX_H;
        //man_x = 4;
        //man_y = 2+FIX_H;
        RestoreXY();
        set_room(0);
        //g_iStory = 40;    //debug:测试结局物品
        //Thing_Add(OBJ_CHEMICAL);  //debug:测试结局剧情
        //已经取得培养液
        if (g_iStory == 40)
        {
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);

            //被抓走
            DisplayMessage(OBJ_MAN, "你们是谁，要做什么");
            DisplayMessage(OBJ_BADMANR, "不要动，你跟博士的交情不错吧，请你跟我们走");
            //我们手上有枪，
            DisplayMessage(OBJ_MAN, "什么，你们是绑架博士的人");
            DisplayMessage(OBJ_BADMANR, "废话少说，快走");
            map_x = 21;
            map_y = 25-FIX_H;
            man_x = 5;
            man_y = 2+FIX_H;
            set_room(3);
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_BADMANR, "希望你可以帮我们劝劝博士，叫他跟我们合作一点，否则你们永远走不出这里");
            DisplayMessage(OBJ_MAN, "原来博士被关在这里");
        }
        iStatus = 1;
    }

    //走进自己家
    else if (x == 12 && y == 2)
    {
        BackupXY();
        map_x = 11;
        map_y = 16;
        man_x = 1;
        man_y = 2;
        set_room(1);
        iStatus = 1;
    }

    //离开自己家
    else if (x == 11 && y == 18)
    {
        //map_x = 4;
        //map_y = 0;
        //man_x = 7;
        //man_y = 2;
        RestoreXY();
        set_room(0);
        iStatus = 1;
    }

    //走进博士的屋子
    else if (x == 1 && y == 2)
    {
        BackupXY();
        map_x = 11;
        map_y = 20;//fix
        man_x = 1; //fix
        man_y = 2; //fix
        set_room(1);
        iStatus = 1;
    }

    //走进远见大楼
    else if (x == 26 && y == 8)
    {
        BackupXY();
        map_x = 11;
        map_y = 25;
        man_x = 8;
        man_y = 2;
        set_room(1);
        iStatus = 1;
    }

    //离开远见大楼
    else if (x == 20 && y == 27)
    {
        //map_x = 20;
        //map_y = 7;
        //man_x = 6;
        //man_y = 2;
        RestoreXY();
        set_room(2);
        iStatus = 1;
    }

    //走进捷运站2
    else if (x == 22 && y == 2)
    {
        BackupXY();
        map_x = 0;
        map_y = 15;
        man_x = 1;
        man_y = 2;
        set_room(1);
        RapidBack();
        iStatus = 1;
    }

    //从博士屋子的后门离开
    else if (x == 20 && y == 23)
    {
        //已经拿到送修单
        //if (Thing_IsExist(OBJ_CABINET_OPEN)) {
        if (MapData[20][19] == OBJ_CABINET_OPEN)
        {
            map_x = 0;
            map_y = 0;
            man_x = 4;
            man_y = 2;
            set_room(0);

            //警察走回博士屋子的门口
            MapData[2][1] = OBJ_POLICE;
            iStatus = 1;
        }

        //尚未拿到送修单，不能离开
        else
        {
            man_x--;
            DisplayMessage(OBJ_MAN, "好不容易才进来博士的屋子，还没找到重要的东西前，我想还是先不要离开好了");
            iStatus = 1;
        }
    }

    //从博士屋子的前门离开
    else if (x == 12 && y == 23)
    {
        man_y--;
        DisplayMessage(OBJ_MAN, "警察可能已经回来了，不要从前门走，免得被发现");
        iStatus = 1;
    }

    //走进捷运车箱
    else if (x == 0 && (y >= 16 && y <= 18))
    {
        RapidMove();
        map_x = 20;
        map_y = 1;
        man_x = 2;
        man_y = 2;
        set_room(2);
        DrawMap();
        DrawGraphic(man_x, man_y, OBJ_MAN);
        DisplayMessage(OBJ_MAN, "到达汐止了");
        iStatus = 1;
    }

    //通过捷运闸口
    else if (x == 4 && (y == 16 || y == 18))
    {
        MapData[y][x] = OBJ_DOORCLOSE;
        iStatus = 1;
    }

    //离开厕所
    else if (x == 27 && y == 23)
    {
        //如果已经拿到卫生纸
        //if (Thing_IsExist(OBJ_TOILETPAPER)) {
        if (g_iStory == 50)
        {
            MapData[23][27] = OBJ_DOORCLOSE;
            iStatus = 1;
        }
    }

    //上床睡觉
    else if (x == 19 && y == 17)
    {
        DrawGraphic(man_x, man_y, OBJ_SLEEP);

        //已经和博士谈过话了
        if (g_iStory == 10)
        {
            DisplayMessage(OBJ_SLEEP, "好想睡哦，ZZZ...");
            ClearScreen();
            DisplayMessage(OBJ_BLANK, "隔天... ");

            MapData[18][12] = OBJ_POLICE;
            map_x = 11;
            map_y = 16;
            man_x = 7;
            man_y = 1;
            set_room(1);
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "怎么一早就有警察来家里，我得去看看才行");
            g_iStory = 15;
            iStatus = 1;
        }
        else
        {
            DisplayMessage(OBJ_SLEEP, "我还不想睡觉，还是出去走走吧");
            man_x--;
            iStatus = 1;
        }
    }
    return iStatus;
}

//----------------------------------------------------------------
int IsWalkable()
{
    char ch;

    ch = MapData[map_y + man_y][map_x + man_x];

    if (ch == OBJ_BLANK || ch == OBJ_DOOROPEN || ch == OBJ_RAPID5 || ch == OBJ_GLOBALVIEW7
     || ch == OBJ_STAIR1 || ch == OBJ_STAIR2 || ch == OBJ_OFFICE4 || ch == OBJ_HOME3
     || ch == OBJ_BED || ch == OBJ_DRHOUSE4 || ch == OBJ_RAPIDCAR1 || ch == OBJ_RAPIDCAR2 || ch == OBJ_RAPIDCAR3
    )
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

void Talk()
{
    int x, y;

    x = man_x + map_x;
    y = man_y + map_y;

    //在博士屋子的门外
    if ((x == 1 && y == 3))
    {
        if (g_iStory == 0)
        {
            DisplayMessage(OBJ_MAN, "博士，这么一个人站在门口发呆呢");
            DisplayMessage(OBJ_DR,  "啊，是你呀，我最近有一项新研究成果要发表");
            DisplayMessage(OBJ_MAN, "那很好呀，为什么要烦恼呢");
            DisplayMessage(OBJ_DR,  "我担心会有人会将我的成果用在不法的用途上");
            DisplayMessage(OBJ_DR,  "而且我最近有被跟踪的感觉，还会接到不明的电话");
            DisplayMessage(OBJ_MAN, "不会吧，博士，要不要通知警方");
            DisplayMessage(OBJ_DR,  "不行，不行，说不定是我太敏感了，不要惊动大家");
            g_iStory = 10;
        }
        else if (g_iStory == 10)
        {
            DisplayMessage(OBJ_DR, "很晚了，快回去睡吧");
        }

        //与警员在博士屋子门外交谈
        else
        {
            if (MapData[2][1] == OBJ_POLICE)
            {
                DisplayMessage(OBJ_MAN,     "警察先生，你为什么一直守在博士的家门口");
                DisplayMessage(OBJ_POLICE,  "因为博士可能是在家中被绑架的，我们要封锁现场，准备进行调查");
                DisplayMessage(OBJ_MAN,     "连我也不能进去吗");
                DisplayMessage(OBJ_POLICE,  "当然，我们不能随意让人破坏现场");
                DisplayMessage(OBJ_MAN,     "（看来我要进去博士的屋里，得先想办法引开这个警察才行）");
            }
        }
    }

    //在家中
    else if (x == 13 && y == 18)
    {

        //与警员在家中交谈
        if (g_iStory == 15)
        {
            DisplayMessage(OBJ_POLICE, "你好，我是警察，你的邻居博士失踪了，他昨晚可能遭人绑架");
            DisplayMessage(OBJ_MAN,    "绑架! 怎么会呢? ");
            DisplayMessage(OBJ_POLICE, "他的屋子门锁有被破坏的痕迹，屋里也有被破坏，今早有人发现才来报案的");
            DisplayMessage(OBJ_POLICE, "博士有和人结怨吗? 或最近有发生过什么事吗? ");
            DisplayMessage(OBJ_MAN,    "……");
            DisplayMessage(OBJ_MAN,    "没有");
            DisplayMessage(OBJ_POLICE, "那昨晚你有听到什么声音，或看到什么可疑的人呢");
            DisplayMessage(OBJ_MAN,    "没有，昨晚我睡得很好");
            DisplayMessage(OBJ_POLICE, "你如果有想起什么线索的话，请你再告诉警方");
            DisplayMessage(OBJ_MAN,    "好的。");
            g_iStory = 20;

            //警员离开
            MapData[18][12] = OBJ_BLANK;
            MapData[18][11] = OBJ_POLICE;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);

            //delay(DELAY_TIME);
            MapData[18][11] = OBJ_BLANK;

            //警员站在博士屋子门外
            MapData[2][1] = OBJ_POLICE;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "博士的失踪一定和昨天他提到的研究有关，");
            DisplayMessage(OBJ_MAN, "惊动警方可能对博士不利，我得自己救他出来。");
            DisplayMessage(OBJ_MAN, "先去博士的研究室看看好了。");
        }
        else
        {
            DisplayMessage(OBJ_MAN, "没有可交谈的人");
        }
    }

    //在远见大楼，哈电宝宝面前
    else if (x == 15 && y == 28)
    {
        DisplayMessage(OBJ_GIRL, "你好，我是哈电宝宝，有什么事吗");
        DisplayMessage(OBJ_MAN,  "啊，你就是哈电宝宝呀，我想问…");
        DisplayMessage(OBJ_MAN,  "晚上有没有空，我们一起吃饭吧");
        DisplayMessage(OBJ_GIRL, "什么? 你是为这个而来的吗? ");
        DisplayMessage(OBJ_MAN,  "啊，不是啦，我是想拿回送修的cc800 ");
        DisplayMessage(OBJ_GIRL, "把送修的单据给我就可以了");
    }

    //在研究室和博士助理交谈
    else if ((x == 7 && y == 21) || (x == 8 && y == 22))
    {
        if (g_iStory >= 20)
        {
            DisplayMessage(OBJ_ASSISTANT, "听说博士被绑架了，我好担心");
            DisplayMessage(OBJ_MAN,       "别担心，我们正在想办法救他出来");
            DisplayMessage(OBJ_MAN,       "你是博士的助理，你知道博士最近有什么研究吗");
            DisplayMessage(OBJ_ASSISTANT, "我不清楚，博士最近都自己关起来研究，只知道好像跟细菌有关");
            DisplayMessage(OBJ_MAN,       "细菌? 那么你知道博士有记录事情的习惯吗? ");
            DisplayMessage(OBJ_ASSISTANT, "他有一台cc800 ，他都把事情记录在里面，不过前一阵子有问题，拿去送修了");
            DisplayMessage(OBJ_MAN,       "（看来我得找出这台cc800 才行）");
        }
        else
        {
            DisplayMessage(OBJ_ASSISTANT, "你好，我是博士的助理");
            DisplayMessage(OBJ_MAN,       "你好");
        }
    }

    //在监牢中和博士交谈
    else if ((x == 28 && y == 28) || (x == 29 && y == 27))
    {

        //刚被囚禁时
        if (g_iStory == 40)
        {
            DisplayMessage(OBJ_MAN, "博士，你不要紧吧，到底发生什么事了");
            DisplayMessage(OBJ_DR,  "他们要我提供我最近研究成功的细菌合成方程式")
                           ;
            DisplayMessage(OBJ_MAN, "细菌合成方程式？");
            DisplayMessage(OBJ_DR,  "没错，是一种具有强力腐蚀性质的细菌");
            DisplayMessage(OBJ_MAN, "强力腐蚀？不会是从你柜子里拿来的这个吧");
            DisplayMessage(OBJ_DR,  "没错，你怎么拿到的");
            DisplayMessage(OBJ_MAN, "糟了，我刚才有沾到一点在身上，我不会被腐蚀掉吧");
            DisplayMessage(OBJ_DR,  "放心好了，这种细菌离开培养液后，很快就会死亡了");
            DisplayMessage(OBJ_DR,  "而且要在有电流通过的时候，才会开始有腐蚀的效果，否则怎能用瓶子装着它");
            DisplayMessage(OBJ_MAN, "说得也是，那就好了");
            DisplayMessage(OBJ_DR,  "别多说了，赶快想法子逃出这里才是");
        }

        //塞住马桶之后
        else if (g_iStory == 50)
        {
            DisplayMessage(OBJ_MAN, "我把厕所的马桶堵住了，等一下漏水应该会引开守卫的");
            DisplayMessage(OBJ_DR,  "希望可以成功");
            BadManGoAway();
            g_iStory = 60;
        }

        //守卫离开之后
        else if (g_iStory == 60 || g_iStory == 70)
        {
            DisplayMessage(OBJ_MAN, "成功了，守卫走开了");
            DisplayMessage(OBJ_DR,  "我们赶快想办法离开");
        }
        else
        {
            DisplayMessage(OBJ_MAN, "...");
            DisplayMessage(OBJ_DR, "...");
        }
    }

    //在监牢之中和守卫谈话
    else if (x == 26 && y == 27)
    {
        if (MapData[y][x - 2] == OBJ_BADMANR)
        {
            DisplayMessage(OBJ_MAN,     "快放我们出去");
            DisplayMessage(OBJ_BADMANR, "在博士答应和我们合作之前，休想离开这里");
        }
    }
    else
    {
        DisplayMessage(OBJ_MAN, "没有可交谈的人");
    }
}

//----------------------------------------------------------------
void Search()
{
    int x, y;

    x = map_x + man_x;
    y = map_y + man_y;

    //在豪宅之前
    if (((x == 5 || x == 6 || x == 7) && (y == 3)) || (x == 8 && y == 2))
    {

        DisplayMessage(OBJ_MAN, "这是博士家旁边的豪宅，很少看见有人进出，不过保全系统很严密，上次有只小鸟撞到窗户，还引起警铃大响，惊动了不少人。");
        return ;
    }

    //在博士的屋子之前
    else if ((x == 1 || x == 2 || x == 3) && (y == 3))
    {
        DisplayMessage(OBJ_MAN, "博士住在这屋子好几年了，我还蛮常来串门子的，他是一个和善的邻居。");
        return ;
    }

    //在家里的柜子前
    else if (x == 18 && y == 17)
    {
        if (Thing_Add(OBJ_SLINGSHOT))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN,       "柜子里有一个弹弓，这个弹弓是我以前小时候的玩具，以前我可是百发百中的神射手");
            DisplayMessage(OBJ_SLINGSHOT, "得到了弹弓");
            return ;
        }
    }

    //在自动售票机前
    else if (x == 7 && y == 16)
    {
        DisplayMessage(OBJ_MAN, "这里有一台自动售票机");
        return ;
    }

    //在捷运闸口
    else if (x == 5 && (y == 16 || y == 18))
    {
        DisplayMessage(OBJ_MAN, "刚好有一班车，不过我需要车票才能过去搭车");
        return ;
    }

    //博士屋子中的柜子
    else if (x == 19 && y == 21)
    {
        if (Thing_Add(OBJ_INVOICE))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN,     "找到了，这里有一张cc800 的送修单据，今天刚好可以去拿回来，地点在汐止，看来我得赶快搭捷运过去才行");
            DisplayMessage(OBJ_INVOICE, "得到了送修单");
            return ;
        }
    }

    //研究室中的柜子
    else if (x == 1 && y == 21)
    {
        DisplayMessage(OBJ_MAN, "这个柜子被一个数字锁锁住了，博士是一个健忘的人，他应该会把号码记在某个地方");
        return ;
    }

    //在厕所中的柜子
    else if (x == 26 && y == 22)
    {

        //得到厕纸
        if (Thing_Add(OBJ_TOILETPAPER))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN,         "找到一大包厕纸，不怕拉肚子了");
            DisplayMessage(OBJ_TOILETPAPER, "得到了厕纸");
            return ;
        }
    }

    //监牢中的门
    else if (x == 29 && y == 27)
    {
        DisplayMessage(OBJ_MAN, "这里有个门好像可以通到外面，不过锁得很紧打不开");
        return ;
    }
    DisplayMessage(OBJ_MAN, "没有检查到什么");
}

//----------------------------------------------------------------
void UseThing()
{
    int iSelectID;
    char cThingID;
    int x, y;

    x = man_x + map_x;
    y = man_y + map_y;

    iSelectID = DisplayMenu(str_ThingBox, mem_ThingBox, max_ThingCount);
    if (iSelectID ==  - 1)
    {
        return ;
    }
    DrawMap();
    DrawGraphic(man_x, man_y, OBJ_MAN);
    cThingID = mem_ThingBox[iSelectID];
    if (cThingID == OBJ_SLINGSHOT)
    {
        if (x == 8 && y == 2 && g_iStory == 20)
        {
            DisplayMessage(OBJ_MAN, "看我的");
            DisplayMessage(OBJ_MAN, "啪，刚好打中窗户，看来我还是相当神准的");
            DisplayMessage(OBJ_MAN, "铃~~警铃开始响了");
            PoliceSeekRichHouse();
        }
        else if ((x == 5 || x == 6 || x == 7) && (y == 3) && g_iStory == 20)
        {
            DisplayMessage(OBJ_MAN, "在这里太明显，会被看到的");
        }
        else
        {
            DisplayMessage(OBJ_MAN, "我可不想惹上什么麻烦");
        }
    }

    //买车票
    else if (x == 7 && y == 16 && cThingID == OBJ_MONEY)
    {
        Thing_Exchange(OBJ_MONEY, OBJ_TICKET);
        DisplayMessage(OBJ_TICKET, "得到了车票");
    }

    //通过捷运闸口
    else if ((x == 3 || x == 5) && (y == 16 || y == 18) && cThingID==OBJ_TICKET)
    {
        MapData[y][4] = OBJ_DOOROPEN;
    }

    //取得 cc800
    else if (x == 15 && y == 28 && cThingID == OBJ_INVOICE)
    {
        Thing_Exchange(OBJ_INVOICE, OBJ_CC800);
        DisplayMessage(OBJ_MAN,  "这是我的cc800 送修的单据");
        DisplayMessage(OBJ_GIRL, "好，请等一下");
        DisplayMessage(OBJ_GIRL, "这是修好的cc800 ，要好好保管哦");
        DisplayMessage(OBJ_MAN,  "好的，我一定会的");
        DisplayMessage(OBJ_MAN,  "（里面有博士实验室里柜子的数字锁密码，我可以用这个去打开他的柜子了）");
        DisplayMessage(OBJ_CC800,"得到了 cc800");
    }

    //取得培养液
    else if (x == 1 && y == 21 && cThingID == OBJ_CC800)
    {
        if (Thing_Add(OBJ_CHEMICAL))
        {
            MapData[y - 1][x] = OBJ_CABINET_OPEN;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "在博士的柜子里，找到了一罐奇怪的药水，不知有什么用途。");
            DisplayMessage(OBJ_MAN, "可能和他最近的研究有关，希望可以找出一些有关他被绑架的线索。");
            DisplayMessage(OBJ_CHEMICAL, "得到了培养液");
            g_iStory = 40;
            MapData[7][16] = OBJ_BADMANR;
            MapData[7][18] = OBJ_BADMANL;
        }
    }

    //塞住马桶
    else if (((x == 26 && y == 22) || (x == 25 && y == 23)) && cThingID == OBJ_TOILETPAPER)
    {
        DisplayMessage(OBJ_MAN, "这样把马桶堵住，等一下就会溢出很多水来引起注意了");
        MapData[23][25] = OBJ_WATER;
        g_iStory = 50;
    }

    //使用细菌培养液和手机逃出监牢
    else if (x == 29 && y == 27)
    {
        if (g_iStory == 60 && cThingID == OBJ_CHEMICAL)
        {
            DisplayMessage(OBJ_MAN, "我把药水涂在门上了，接下来等通上电就可以了");
            g_iStory = 70;
        }
        else if (g_iStory == 70 && cThingID == OBJ_CELLPHONE)
        {
            DisplayMessage(OBJ_MAN, "还好行动电话的电池还有电，把线路改一下，就可以放出电了");
            MapData[27][30] = OBJ_BLANK;
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            DisplayMessage(OBJ_MAN, "哇，门一下子就溶掉了，太可怕了");
            DisplayMessage(OBJ_DR,  "我们快逃走吧");
            g_iStory = 80;

            //The End
            TheEnd();
        }

        else if (g_iStory < 60)
        {
            DisplayMessage(OBJ_MAN, "没有作用");
        }

        else
        {
            DisplayMessage(OBJ_MAN, "有人还在门口监视，太危险了会被发现的，我得引开他才行");
        }
    }

    //使用行动电话
    else if (cThingID == OBJ_CELLPHONE)
    {
        DisplayMessage(OBJ_MAN, "嘟嘟…收不到讯号，这个行动电话真差，总是收不到讯号，打不出去");
    }

    //贿赂警员
    else if ((x == 1 && y == 3) && cThingID==OBJ_MONEY && MapData[2][1]==OBJ_POLICE)
    {
        DisplayMessage(OBJ_POLICE, "你敢贿赂警员，这可是重罪");
        DisplayMessage(OBJ_MAN,    "不敢，不敢");
    }

    else
    {
        DisplayMessage(OBJ_MAN, "没有作用");
    }
}

//----------------------------------------------------------------
char KeyPause(int delaytime)
{
    char key;
    if (delaytime != 0)
    {
        Delay(delaytime);
    }
    key = CheckKey(128);
    if (key == 0)
    {
        while(Inkey() != 0);
        key = getchar();
    }
    return key;//ConvertKey(key);
}

void main()
{
    int x, y;
    int tx, ty;
    int ch;
    int iDrawTimes;
    int iSelectID;
    ReleaseKey(128);
    // 兼容处理
    check_WIDTH_HEIGHT();
    LCD_MAX_WIDTH_OBJ = _WIDTH / OBJECT_WIDTH_DOT;
    LCD_MAX_HEIGHT_OBJ = (_HEIGHT + 10) / OBJECT_HEIGHT_DOT;
    LCD_HEIGHT_START = 0;
    LCD_HEIGHT_END = LCD_MAX_HEIGHT_OBJ - 1;//debug
    LCD_WIDTH_START = 0;
    LCD_WIDTH_END = LCD_MAX_WIDTH_OBJ - 1;
    FIX_H = (_HEIGHT - (80 - 10)) / OBJECT_HEIGHT_DOT;
    //
    if (_WIDTH >= 26 * 8)
    {
        TEXT_FONT = FONT_L;
        FONT_W = 8;
        FONT_H = 17;
    }
    else
    {
        TEXT_FONT = FONT_S;
        FONT_W = 6;
        FONT_H = 13;
    }
    //
    memcpy(MapData, MapBackup, sizeof(MapData));
    //
    set_room(0);
    g_iStory = 0;
    cnt_MenuItem = 3;

    //  InitialThingBox();
    max_ThingCount = 2;
    mem_ThingBox[0] = OBJ_MONEY;
    mem_ThingBox[1] = OBJ_CELLPHONE;
    strcpy(str_ThingBox[0], "钱        ");
    strcpy(str_ThingBox[1], "行动电话  ");

    man_x = 7;
    man_y = 2;
    map_x = 4;
    map_y = 0;

    iDrawTimes = 0;
    DrawMap();
    DrawGraphic(man_x, man_y, OBJ_MAN);
    Refresh();
    ch = KEY_HELP;
    for (;;ch=KeyPause(200))
    {
        rec_x = man_x;
        rec_y = man_y;
        //
        if (ch == KEY_LEFT || ch=='a')
        {
            if (man_x > LCD_WIDTH_START)
            {
                man_x--;
                if (IsWalkable())
                {
                    if (man_x == LCD_WIDTH_START)
                    {
                        if (map_x > 0)
                        {
                            map_x--;
                            man_x++;
                        }
                    }
                }
                else
                {
                    man_x++;
                }
            }
        }
        else if (ch == KEY_RIGHT || ch=='d')
        {
            if (man_x < LCD_WIDTH_END)
            {
                man_x++;
                if (IsWalkable())
                {
                    if (man_x == LCD_WIDTH_END)
                    {
                        if (map_x < MAP_MAX_WIDTH_OBJ - LCD_MAX_WIDTH_OBJ)
                        {
                            map_x++;
                            man_x--;
                        }
                    }
                }
                else
                {
                    man_x--;
                }
            }
        }
        else if (ch == KEY_UP || ch=='w')
        {
            if (man_y > LCD_HEIGHT_START)
            {
                man_y--;
                if (IsWalkable())
                {
                    if (man_y == LCD_HEIGHT_START)
                    {
                        if (map_y > 0)
                        {
                            map_y--;
                            man_y++;
                        }
                    }
                }
                else
                {
                    man_y++;
                }

            }
        }
        else if (ch == KEY_DOWN || ch=='s')
        {
            if (man_y < max_height_obj - 1)
            {
                man_y++;
                if (IsWalkable())
                {
                    if (man_y == max_height_obj - 1)
                    {
                        if (map_y < MAP_MAX_HEIGHT_OBJ - max_height_obj)
                        {
                            map_y++;
                            man_y--;
                        }
                    }
                }
                else
                {
                    man_y--;
                }
            }
        }
        else if (ch == KEY_ENTER || ch=='k'|| ch=='.' || ch==KEY_F1)
        {
            iSelectID = DisplayMenu(str_MenuItem, NULL, cnt_MenuItem);
            if (iSelectID == TALK)
            {
                DrawMap();
                DrawGraphic(man_x, man_y, OBJ_MAN);
                Talk();
            }
            else if (iSelectID == SEARCH)
            {
                DrawMap();
                DrawGraphic(man_x, man_y, OBJ_MAN);
                Search();
            }
            else if (iSelectID == USE)
            {
                DrawMap();
                DrawGraphic(man_x, man_y, OBJ_MAN);
                UseThing();
            }
        }
        else if (ch == KEY_HELP)
        {
            tx = (_WIDTH - FONT_W * 26) / 2;
            ty = (_HEIGHT - FONT_H * 6) / 2;
            ClearScreen();
            TextOut(tx, ty + FONT_H * 0, "游戏中按下Enter 会出现‘交", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 1, "谈’、‘查看’、‘使用物品", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 2, "’的选项，游戏并不难，和遇", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 3, "见的人交谈，多查看四周环境", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 4, "应该就可以顺利的进行游戏。", TEXT_FONT);
            TextOut(tx, ty + FONT_H * 5, "移植:诗诺比   原作:Nothing", TEXT_FONT);
            Refresh();
            getchar();
        }
        else if (ch==KEY_ESC)
        {
            break;
        }

        DrawMap();

        x = map_x + man_x;
        y = map_y + man_y;

        if (iDrawTimes % 2)
        {
            DrawGraphic(man_x, man_y, OBJ_MAN);
        }
        else
        {
            DrawGraphic(man_x, man_y, OBJ_MAN2);
        }
        Refresh();

        if (CheckStatus())
        {
            iDrawTimes = 0;
            Delay(100);
            DrawMap();
            DrawGraphic(man_x, man_y, OBJ_MAN);
            Refresh();
        }
        iDrawTimes++;
    }
}

//----------------------------------------------------------------

